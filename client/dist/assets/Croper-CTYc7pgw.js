import{r as m,R as g,p as A,q as Q,d as ct,a as dt,e as _,j as D,F as J,f as lt,s as ht,n as pt,B as Z}from"./index-DnOxbK9y.js";import{j as ut,g as gt,a as wt,s as U,r as xt,b as $,_ as M,k as X,l as vt,u as mt,e as ft,h as yt}from"./generateUtilityClasses-BXBhSnmm.js";import{r as Ct}from"./createSvgIcon-ByUXHRtn.js";import{M as tt}from"./Toast-DhNBWwFE.js";import{B as bt}from"./ButtonBase-Q1GAl2jM.js";const Dt=Math.PI/180;async function Rt(o,t,e,r=1,n=0){const i=t.getContext("2d");if(!i)throw new Error("No 2d context");const c=o.naturalWidth/o.width,l=o.naturalHeight/o.height,s=window.devicePixelRatio;t.width=Math.floor(e.width*c*s),t.height=Math.floor(e.height*l*s),i.scale(s,s),i.imageSmoothingQuality="high";const a=e.x*c,h=e.y*l,p=n*Dt,u=o.naturalWidth/2,d=o.naturalHeight/2;i.save(),i.translate(-a,-h),i.translate(u,d),i.rotate(p),i.scale(r,r),i.translate(-u,-d),i.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,o.naturalWidth,o.naturalHeight),i.restore()}function It(o,t,e){m.useEffect(()=>{const r=setTimeout(()=>{o()},t);return()=>{clearTimeout(r)}},[e,o,t])}const O={x:0,y:0,width:0,height:0,unit:"px"},S=(o,t,e)=>Math.min(Math.max(o,t),e),$t=(...o)=>o.filter(t=>t&&typeof t=="string").join(" "),et=(o,t)=>o===t||o.width===t.width&&o.height===t.height&&o.x===t.x&&o.y===t.y&&o.unit===t.unit;function Mt(o,t,e,r){const n=I(o,e,r);return o.width&&(n.height=n.width/t),o.height&&(n.width=n.height*t),n.y+n.height>r&&(n.height=r-n.y,n.width=n.height*t),n.x+n.width>e&&(n.width=e-n.x,n.height=n.width/t),o.unit==="%"?k(n,e,r):n}function zt(o,t,e){const r=I(o,t,e);return r.x=(t-r.width)/2,r.y=(e-r.height)/2,o.unit==="%"?k(r,t,e):r}function k(o,t,e){return o.unit==="%"?{...O,...o,unit:"%"}:{unit:"%",x:o.x?o.x/t*100:0,y:o.y?o.y/e*100:0,width:o.width?o.width/t*100:0,height:o.height?o.height/e*100:0}}function I(o,t,e){return o.unit?o.unit==="px"?{...O,...o,unit:"px"}:{unit:"px",x:o.x?o.x*t/100:0,y:o.y?o.y*e/100:0,width:o.width?o.width*t/100:0,height:o.height?o.height*e/100:0}:{...O,...o,unit:"px"}}function ot(o,t,e,r,n,i=0,c=0,l=r,s=n){const a={...o};let h=Math.min(i,r),p=Math.min(c,n),u=Math.min(l,r),d=Math.min(s,n);t&&(t>1?(h=c?c*t:h,p=h/t,u=l*t):(p=i?i/t:p,h=p*t,d=s/t)),a.y<0&&(a.height=Math.max(a.height+a.y,p),a.y=0),a.x<0&&(a.width=Math.max(a.width+a.x,h),a.x=0);const v=r-(a.x+a.width);v<0&&(a.x=Math.min(a.x,r-h),a.width+=v);const y=n-(a.y+a.height);if(y<0&&(a.y=Math.min(a.y,n-p),a.height+=y),a.width<h&&((e==="sw"||e=="nw")&&(a.x-=h-a.width),a.width=h),a.height<p&&((e==="nw"||e=="ne")&&(a.y-=p-a.height),a.height=p),a.width>u&&((e==="sw"||e=="nw")&&(a.x-=u-a.width),a.width=u),a.height>d&&((e==="nw"||e=="ne")&&(a.y-=d-a.height),a.height=d),t){const C=a.width/a.height;if(C<t){const b=Math.max(a.width/t,p);(e==="nw"||e=="ne")&&(a.y-=b-a.height),a.height=b}else if(C>t){const b=Math.max(a.height*t,h);(e==="sw"||e=="nw")&&(a.x-=b-a.width),a.width=b}}return a}function kt(o,t,e,r){const n={...o};return t==="ArrowLeft"?r==="nw"?(n.x-=e,n.y-=e,n.width+=e,n.height+=e):r==="w"?(n.x-=e,n.width+=e):r==="sw"?(n.x-=e,n.width+=e,n.height+=e):r==="ne"?(n.y+=e,n.width-=e,n.height-=e):r==="e"?n.width-=e:r==="se"&&(n.width-=e,n.height-=e):t==="ArrowRight"&&(r==="nw"?(n.x+=e,n.y+=e,n.width-=e,n.height-=e):r==="w"?(n.x+=e,n.width-=e):r==="sw"?(n.x+=e,n.width-=e,n.height-=e):r==="ne"?(n.y-=e,n.width+=e,n.height+=e):r==="e"?n.width+=e:r==="se"&&(n.width+=e,n.height+=e)),t==="ArrowUp"?r==="nw"?(n.x-=e,n.y-=e,n.width+=e,n.height+=e):r==="n"?(n.y-=e,n.height+=e):r==="ne"?(n.y-=e,n.width+=e,n.height+=e):r==="sw"?(n.x+=e,n.width-=e,n.height-=e):r==="s"?n.height-=e:r==="se"&&(n.width-=e,n.height-=e):t==="ArrowDown"&&(r==="nw"?(n.x+=e,n.y+=e,n.width-=e,n.height-=e):r==="n"?(n.y+=e,n.height-=e):r==="ne"?(n.y+=e,n.width-=e,n.height-=e):r==="sw"?(n.x-=e,n.width+=e,n.height+=e):r==="s"?n.height+=e:r==="se"&&(n.width+=e,n.height+=e)),n}const P={capture:!0,passive:!1};let Et=0;const z=class R extends m.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=m.createRef(),this.mediaRef=m.createRef(),this.initChangeCalled=!1,this.instanceId=`rc-${Et++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=t=>{const{crop:e,disabled:r}=this.props,n=this.getBox();if(!e)return;const i=I(e,n.width,n.height);if(r)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=t.target.dataset.ord,l=!!c;let s=t.clientX,a=t.clientY,h=i.x,p=i.y;if(c){const u=t.clientX-n.x,d=t.clientY-n.y;let v=0,y=0;c==="ne"||c=="e"?(v=u-(i.x+i.width),y=d-i.y,h=i.x,p=i.y+i.height):c==="se"||c==="s"?(v=u-(i.x+i.width),y=d-(i.y+i.height),h=i.x,p=i.y):c==="sw"||c=="w"?(v=u-i.x,y=d-(i.y+i.height),h=i.x+i.width,p=i.y):(c==="nw"||c=="n")&&(v=u-i.x,y=d-i.y,h=i.x+i.width,p=i.y+i.height),s=h+n.x+v,a=p+n.y+y}this.evData={startClientX:s,startClientY:a,startCropX:h,startCropY:p,clientX:t.clientX,clientY:t.clientY,isResize:l,ord:c},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=t=>{const{crop:e,disabled:r,locked:n,keepSelection:i,onChange:c}=this.props,l=this.getBox();if(r||n||i&&e)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const s=t.clientX-l.x,a=t.clientY-l.y,h={unit:"px",x:s,y:a,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:s,startCropY:a,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,c(I(h,l.width,l.height),k(h,l.width,l.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=t=>{const{crop:e,disabled:r,onChange:n,onDragStart:i}=this.props,c=this.getBox();if(r||!e||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(t));const{evData:l}=this;l.clientX=t.clientX,l.clientY=t.clientY;let s;l.isResize?s=this.resizeCrop():s=this.dragCrop(),et(e,s)||n(I(s,c.width,c.height),k(s,c.width,c.height))},this.onComponentKeyDown=t=>{const{crop:e,disabled:r,onChange:n,onComplete:i}=this.props;if(r)return;const c=t.key;let l=!1;if(!e)return;const s=this.getBox(),a=this.makePixelCrop(s),h=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?R.nudgeStepLarge:t.shiftKey?R.nudgeStepMedium:R.nudgeStep;if(c==="ArrowLeft"?(a.x-=h,l=!0):c==="ArrowRight"?(a.x+=h,l=!0):c==="ArrowUp"?(a.y-=h,l=!0):c==="ArrowDown"&&(a.y+=h,l=!0),l){t.cancelable&&t.preventDefault(),a.x=S(a.x,0,s.width-a.width),a.y=S(a.y,0,s.height-a.height);const p=I(a,s.width,s.height),u=k(a,s.width,s.height);n(p,u),i&&i(p,u)}},this.onHandlerKeyDown=(t,e)=>{const{aspect:r=0,crop:n,disabled:i,minWidth:c=0,minHeight:l=0,maxWidth:s,maxHeight:a,onChange:h,onComplete:p}=this.props,u=this.getBox();if(i||!n)return;if(t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="ArrowLeft"||t.key==="ArrowRight")t.stopPropagation(),t.preventDefault();else return;const d=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?R.nudgeStepLarge:t.shiftKey?R.nudgeStepMedium:R.nudgeStep,v=I(n,u.width,u.height),y=kt(v,t.key,d,e),C=ot(y,r,e,u.width,u.height,c,l,s,a);if(!et(n,C)){const b=k(C,u.width,u.height);h(C,b),p&&p(C,b)}},this.onDocPointerDone=t=>{const{crop:e,disabled:r,onComplete:n,onDragEnd:i}=this.props,c=this.getBox();this.unbindDocMove(),!(r||!e)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(t),n&&n(I(e,c.width,c.height),k(e,c.width,c.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var t;(t=this.componentRef.current)==null||t.scrollTo(0,0)}}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:e,y:r,width:n,height:i}=t.getBoundingClientRect();return{x:e,y:r,width:n,height:i}}componentDidUpdate(t){const{crop:e,onComplete:r}=this.props;if(r&&!t.crop&&e){const{width:n,height:i}=this.getBox();n&&i&&r(I(e,n,i),k(e,n,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,P),this.document.addEventListener("pointerup",this.onDocPointerDone,P),this.document.addEventListener("pointercancel",this.onDocPointerDone,P),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,P),this.document.removeEventListener("pointerup",this.onDocPointerDone,P),this.document.removeEventListener("pointercancel",this.onDocPointerDone,P),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,e=this.getBox(),r=this.makePixelCrop(e),n=t.clientX-t.startClientX,i=t.clientY-t.startClientY;return r.x=S(t.startCropX+n,0,e.width-r.width),r.y=S(t.startCropY+i,0,e.height-r.height),r}getPointRegion(t,e,r,n){const{evData:i}=this,c=i.clientX-t.x,l=i.clientY-t.y;let s;n&&e?s=e==="nw"||e==="n"||e==="ne":s=l<i.startCropY;let a;return r&&e?a=e==="nw"||e==="w"||e==="sw":a=c<i.startCropX,a?s?"nw":"sw":s?"ne":"se"}resolveMinDimensions(t,e,r=0,n=0){const i=Math.min(r,t.width),c=Math.min(n,t.height);return!e||!i&&!c?[i,c]:e>1?i?[i,i/e]:[c*e,c]:c?[c*e,c]:[i,i/e]}resizeCrop(){const{evData:t}=this,{aspect:e=0,maxWidth:r,maxHeight:n}=this.props,i=this.getBox(),[c,l]=this.resolveMinDimensions(i,e,this.props.minWidth,this.props.minHeight);let s=this.makePixelCrop(i);const a=this.getPointRegion(i,t.ord,c,l),h=t.ord||a;let p=t.clientX-t.startClientX,u=t.clientY-t.startClientY;(c&&h==="nw"||h==="w"||h==="sw")&&(p=Math.min(p,-c)),(l&&h==="nw"||h==="n"||h==="ne")&&(u=Math.min(u,-l));const d={unit:"px",x:0,y:0,width:0,height:0};a==="ne"?(d.x=t.startCropX,d.width=p,e?(d.height=d.width/e,d.y=t.startCropY-d.height):(d.height=Math.abs(u),d.y=t.startCropY-d.height)):a==="se"?(d.x=t.startCropX,d.y=t.startCropY,d.width=p,e?d.height=d.width/e:d.height=u):a==="sw"?(d.x=t.startCropX+p,d.y=t.startCropY,d.width=Math.abs(p),e?d.height=d.width/e:d.height=u):a==="nw"&&(d.x=t.startCropX+p,d.width=Math.abs(p),e?(d.height=d.width/e,d.y=t.startCropY-d.height):(d.height=Math.abs(u),d.y=t.startCropY+u));const v=ot(d,e,a,i.width,i.height,c,l,r,n);return e||R.xyOrds.indexOf(h)>-1?s=v:R.xOrds.indexOf(h)>-1?(s.x=v.x,s.width=v.width):R.yOrds.indexOf(h)>-1&&(s.y=v.y,s.height=v.height),s.x=S(s.x,0,i.width-s.width),s.y=S(s.y,0,i.height-s.height),s}renderCropSelection(){const{ariaLabels:t=R.defaultProps.ariaLabels,disabled:e,locked:r,renderSelectionAddon:n,ruleOfThirds:i,crop:c}=this.props,l=this.getCropStyle();if(c)return g.createElement("div",{style:l,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!e&&!r&&g.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},g.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),g.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),g.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),g.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"nw"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"n"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"ne"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"e"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"se"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"s"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"sw"),role:"button"}),g.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:s=>this.onHandlerKeyDown(s,"w"),role:"button"})),n&&g.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:s=>s.stopPropagation()},n(this.state)),i&&g.createElement(g.Fragment,null,g.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),g.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){const e={...O,...this.props.crop||{}};return I(e,t.width,t.height)}render(){const{aspect:t,children:e,circularCrop:r,className:n,crop:i,disabled:c,locked:l,style:s,ruleOfThirds:a}=this.props,{cropIsActive:h,newCropIsBeingDrawn:p}=this.state,u=i?this.renderCropSelection():null,d=$t("ReactCrop",n,h&&"ReactCrop--active",c&&"ReactCrop--disabled",l&&"ReactCrop--locked",p&&"ReactCrop--new-crop",i&&t&&"ReactCrop--fixed-aspect",i&&r&&"ReactCrop--circular-crop",i&&a&&"ReactCrop--rule-of-thirds",!this.dragStarted&&i&&!i.width&&!i.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return g.createElement("div",{ref:this.componentRef,className:d,style:s},g.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},e),i?g.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},g.createElement("defs",null,g.createElement("mask",{id:`hole-${this.instanceId}`},g.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?g.createElement("ellipse",{cx:`${i.x+i.width/2}${i.unit}`,cy:`${i.y+i.height/2}${i.unit}`,rx:`${i.width/2}${i.unit}`,ry:`${i.height/2}${i.unit}`,fill:"black"}):g.createElement("rect",{x:`${i.x}${i.unit}`,y:`${i.y}${i.unit}`,width:`${i.width}${i.unit}`,height:`${i.height}${i.unit}`,fill:"black"}))),g.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,u)}};z.xOrds=["e","w"],z.yOrds=["n","s"],z.xyOrds=["nw","ne","se","sw"],z.nudgeStep=1,z.nudgeStepMedium=10,z.nudgeStepLarge=100,z.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let Bt=z;var T={},St=ut;Object.defineProperty(T,"__esModule",{value:!0});var nt=T.default=void 0,Pt=St(Ct()),_t=A;nt=T.default=(0,Pt.default)((0,_t.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");function Ht(o){return wt("MuiButton",o)}const Nt=gt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),L=Nt,Yt=m.createContext({}),Xt=Yt,Lt=m.createContext(void 0),At=Lt,Ot=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ut=o=>{const{color:t,disableElevation:e,fullWidth:r,size:n,variant:i,classes:c}=o,l={root:["root",i,`${i}${$(t)}`,`size${$(n)}`,`${i}Size${$(n)}`,`color${$(t)}`,e&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${$(n)}`],endIcon:["icon","endIcon",`iconSize${$(n)}`]},s=yt(l,Ht,c);return M({},c,s)},it=o=>M({},o.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},o.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},o.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Kt=U(bt,{shouldForwardProp:o=>xt(o)||o==="classes",name:"MuiButton",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.root,t[e.variant],t[`${e.variant}${$(e.color)}`],t[`size${$(e.size)}`],t[`${e.variant}Size${$(e.size)}`],e.color==="inherit"&&t.colorInherit,e.disableElevation&&t.disableElevation,e.fullWidth&&t.fullWidth]}})(({theme:o,ownerState:t})=>{var e,r;const n=o.palette.mode==="light"?o.palette.grey[300]:o.palette.grey[800],i=o.palette.mode==="light"?o.palette.grey.A100:o.palette.grey[700];return M({},o.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(o.vars||o).shape.borderRadius,transition:o.transitions.create(["background-color","box-shadow","border-color","color"],{duration:o.transitions.duration.short}),"&:hover":M({textDecoration:"none",backgroundColor:o.vars?`rgba(${o.vars.palette.text.primaryChannel} / ${o.vars.palette.action.hoverOpacity})`:X(o.palette.text.primary,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:o.vars?`rgba(${o.vars.palette[t.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:X(o.palette[t.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(o.vars||o).palette[t.color].main}`,backgroundColor:o.vars?`rgba(${o.vars.palette[t.color].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:X(o.palette[t.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:o.vars?o.vars.palette.Button.inheritContainedHoverBg:i,boxShadow:(o.vars||o).shadows[4],"@media (hover: none)":{boxShadow:(o.vars||o).shadows[2],backgroundColor:(o.vars||o).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(o.vars||o).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(o.vars||o).palette[t.color].main}}),"&:active":M({},t.variant==="contained"&&{boxShadow:(o.vars||o).shadows[8]}),[`&.${L.focusVisible}`]:M({},t.variant==="contained"&&{boxShadow:(o.vars||o).shadows[6]}),[`&.${L.disabled}`]:M({color:(o.vars||o).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(o.vars||o).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(o.vars||o).palette.action.disabled,boxShadow:(o.vars||o).shadows[0],backgroundColor:(o.vars||o).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(o.vars||o).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(o.vars||o).palette[t.color].main,border:o.vars?`1px solid rgba(${o.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${X(o.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:o.vars?o.vars.palette.text.primary:(e=(r=o.palette).getContrastText)==null?void 0:e.call(r,o.palette.grey[300]),backgroundColor:o.vars?o.vars.palette.Button.inheritContainedBg:n,boxShadow:(o.vars||o).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(o.vars||o).palette[t.color].contrastText,backgroundColor:(o.vars||o).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:o.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:o.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:o.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:o.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:o.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:o.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:o})=>o.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${L.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${L.disabled}`]:{boxShadow:"none"}}),Wt=U("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.startIcon,t[`iconSize${$(e.size)}`]]}})(({ownerState:o})=>M({display:"inherit",marginRight:8,marginLeft:-4},o.size==="small"&&{marginLeft:-2},it(o))),Tt=U("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(o,t)=>{const{ownerState:e}=o;return[t.endIcon,t[`iconSize${$(e.size)}`]]}})(({ownerState:o})=>M({display:"inherit",marginRight:-4,marginLeft:8},o.size==="small"&&{marginRight:-2},it(o))),jt=m.forwardRef(function(t,e){const r=m.useContext(Xt),n=m.useContext(At),i=vt(r,t),c=mt({props:i,name:"MuiButton"}),{children:l,color:s="primary",component:a="button",className:h,disabled:p=!1,disableElevation:u=!1,disableFocusRipple:d=!1,endIcon:v,focusVisibleClassName:y,fullWidth:C=!1,size:b="medium",startIcon:H,type:N,variant:K="text"}=c,w=ft(c,Ot),x=M({},c,{color:s,component:a,disabled:p,disableElevation:u,disableFocusRipple:d,fullWidth:C,size:b,type:N,variant:K}),f=Ut(x),W=H&&A.jsx(Wt,{className:f.startIcon,ownerState:x,children:H}),E=v&&A.jsx(Tt,{className:f.endIcon,ownerState:x,children:v}),Y=n||"";return A.jsxs(Kt,M({ownerState:x,className:Q(r.className,f.root,h,Y),component:a,disabled:p,focusRipple:!d,focusVisibleClassName:Q(f.focusVisible,y),ref:e,type:N},w,{classes:f,children:[W,l,E]}))}),Ft=jt,Vt=U("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),te=()=>{const[o,t]=m.useState(!1),[e,r]=m.useState(""),[n,i]=m.useState(10/10),[c,l]=m.useState(),s=m.useRef(null),[a,h]=m.useState(),p=m.useRef(null),u=m.useRef(""),d=m.useRef(null),v=ct(),{user:y}=dt(w=>w.userAuth);function C(w,x,f){return zt(Mt({unit:"%",width:80},f,w,x),w,x)}const b=w=>{if(w.target.files&&w.target.files.length>0){l(void 0);const x=new FileReader;x.addEventListener("load",()=>{var f;r(((f=x.result)==null?void 0:f.toString())||"")}),x.readAsDataURL(w.target.files[0]),t(!0)}},H=w=>{if(n){const{width:x,height:f}=w.currentTarget;l(C(x,f,n))}};function N(){if(n)i(void 0);else if(i(10/10),s!=null&&s.current){const{width:w,height:x}=s.current,f=C(w,x,16/9);l(f),h(I(f,w,x))}}async function K(){var F,V,G;const w=s.current,x=p.current;if(!w||!x||!a)throw new Error("Crop canvas does not exist");const f=w.naturalWidth/w.width,W=w.naturalHeight/w.height,E=new OffscreenCanvas(a.width*f,a.height*W),Y=E.getContext("2d");if(!Y)throw new Error("No 2d context");Y.drawImage(x,0,0,x.width,x.height,0,0,E.width,E.height);const j=await E.convertToBlob({type:"image/png"});if(u.current&&URL.revokeObjectURL(u.current),u.current=URL.createObjectURL(j),d.current){d.current.href=u.current;const at=Math.random().toString(16).slice(2)+(new Date().getTime()/1e3).toString(),rt=lt(ht,at),q=await pt(rt,j);if(q.metadata){const st=(F=q.metadata)==null?void 0:F.fullPath,B=await v.post("/managment/profieImage-update/",{img_firebase_id:st,role:y==null?void 0:y.role},{withCredentials:!0});((V=B==null?void 0:B.data)==null?void 0:V.status)==="success"?(Z.success((G=B==null?void 0:B.data)==null?void 0:G.message),location.reload()):Z.error("Image Updation Failed")}}}return It(async()=>{a!=null&&a.width&&(a!=null&&a.height)&&s.current&&p.current&&Rt(s.current,p.current,a)},100,[a]),_(J,{children:[_(Ft,{id:"img_btn",style:{background:"rgb(31 41 55)",color:"white",border:"1px solid black"},component:"label",variant:"contained",startIcon:D(nt,{}),children:["Upload Photo",D(Vt,{type:"file",accept:"image/*",onChange:b,onClick:N})]}),o?D(tt,{show:o,onClose:()=>t(!1),children:_("div",{children:[!!e&&D(tt.Body,{children:D("div",{className:"w-full",children:D(Bt,{crop:c,onChange:(w,x)=>l(x),onComplete:w=>h(w),aspect:n,minWidth:100,minHeight:100,children:D("img",{width:300,ref:s,alt:"Crop Me",src:e,onLoad:H})})})}),!!a&&_(J,{children:[D("div",{className:"hidden",children:D("canvas",{ref:p,style:{border:"1px solid black",objectFit:"contain",width:a.width,height:a.height}})}),_("div",{className:"w-full flex justify-end",children:[D("button",{className:"border py-1 px-1 rounded-sm bg-color-five mr-2",onClick:()=>t(!1),children:"Discard"}),D("button",{onClick:K,className:"border px-1 py-1 bg-color-one text-white rounded-sm",children:"Save Image"}),D("a",{href:"#hidden",ref:d,download:!0,style:{position:"absolute",top:"-200vh",visibility:"hidden"},children:"Hidden download"})]})]})]})}):""]})};export{te as C};
