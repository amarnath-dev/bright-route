import{r as e,R as O,b as F,u as H,j as w,g as N,B as V}from"./index-U6pLF9IQ.js";function J(o={}){const{nonce:t,onScriptLoadSuccess:c,onScriptLoadError:l}=o,[u,d]=e.useState(!1),n=e.useRef(c);n.current=c;const v=e.useRef(l);return v.current=l,e.useEffect(()=>{const i=document.createElement("script");return i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.nonce=t,i.onload=()=>{var r;d(!0),(r=n.current)===null||r===void 0||r.call(n)},i.onerror=()=>{var r;d(!1),(r=v.current)===null||r===void 0||r.call(v)},document.body.appendChild(i),()=>{document.body.removeChild(i)}},[t]),u}const k=e.createContext(null);function K({clientId:o,nonce:t,onScriptLoadSuccess:c,onScriptLoadError:l,children:u}){const d=J({nonce:t,onScriptLoadSuccess:c,onScriptLoadError:l}),n=e.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:d}),[o,d]);return O.createElement(k.Provider,{value:n},u)}function P(){const o=e.useContext(k);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function Q(o){var t;return(t=o==null?void 0:o.clientId)!==null&&t!==void 0?t:o==null?void 0:o.client_id}const U={large:40,medium:32,small:20};function W({onSuccess:o,onError:t,useOneTap:c,promptMomentNotification:l,type:u="standard",theme:d="outline",size:n="large",text:v,shape:i,logo_alignment:r,width:L,locale:A,click_listener:B,containerProps:g,...M}){const C=e.useRef(null),{clientId:j,scriptLoadedSuccessfully:I}=P(),R=e.useRef(o);R.current=o;const h=e.useRef(t);h.current=t;const D=e.useRef(l);return D.current=l,e.useEffect(()=>{var m,p,_,S,y,E,x,b,G;if(I)return(_=(p=(m=window==null?void 0:window.google)===null||m===void 0?void 0:m.accounts)===null||p===void 0?void 0:p.id)===null||_===void 0||_.initialize({client_id:j,callback:s=>{var a;if(!(s!=null&&s.credential))return(a=h.current)===null||a===void 0?void 0:a.call(h);const{credential:f,select_by:q}=s;R.current({credential:f,clientId:Q(s),select_by:q})},...M}),(E=(y=(S=window==null?void 0:window.google)===null||S===void 0?void 0:S.accounts)===null||y===void 0?void 0:y.id)===null||E===void 0||E.renderButton(C.current,{type:u,theme:d,size:n,text:v,shape:i,logo_alignment:r,width:L,locale:A,click_listener:B}),c&&((G=(b=(x=window==null?void 0:window.google)===null||x===void 0?void 0:x.accounts)===null||b===void 0?void 0:b.id)===null||G===void 0||G.prompt(D.current)),()=>{var s,a,f;c&&((f=(a=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.accounts)===null||a===void 0?void 0:a.id)===null||f===void 0||f.cancel())}},[j,I,c,u,d,n,v,i,r,L,A]),O.createElement("div",{...g,ref:C,style:{height:U[n],...g==null?void 0:g.style}})}const Y=()=>{const o=F(),t=H(),c=async u=>{if(u.credential){const n=(await o(N(u.credential))).payload;n.status==="success"?t("/"):n.status==409&&V.error(n.message)}},l=async()=>{console.log("Error Occured")};return w.jsx(w.Fragment,{children:w.jsx(K,{clientId:"http://836196691306-9na9nln4bd03vg7mthl3kq8rhaotuusg.apps.googleusercontent.com",children:w.jsx(W,{onSuccess:c,onError:l,width:"300"})})})};export{Y as G};
