import{r as e,R as O,w as F,u as H,j as w,E as N,B as V}from"./index-86Yayage.js";function J(o={}){const{nonce:t,onScriptLoadSuccess:c,onScriptLoadError:l}=o,[u,d]=e.useState(!1),n=e.useRef(c);n.current=c;const v=e.useRef(l);return v.current=l,e.useEffect(()=>{const i=document.createElement("script");return i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.nonce=t,i.onload=()=>{var r;d(!0),(r=n.current)===null||r===void 0||r.call(n)},i.onerror=()=>{var r;d(!1),(r=v.current)===null||r===void 0||r.call(v)},document.body.appendChild(i),()=>{document.body.removeChild(i)}},[t]),u}const B=e.createContext(null);function K({clientId:o,nonce:t,onScriptLoadSuccess:c,onScriptLoadError:l,children:u}){const d=J({nonce:t,onScriptLoadSuccess:c,onScriptLoadError:l}),n=e.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:d}),[o,d]);return O.createElement(B.Provider,{value:n},u)}function P(){const o=e.useContext(B);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function Q(o){var t;return(t=o==null?void 0:o.clientId)!==null&&t!==void 0?t:o==null?void 0:o.client_id}const U={large:40,medium:32,small:20};function W({onSuccess:o,onError:t,useOneTap:c,promptMomentNotification:l,type:u="standard",theme:d="outline",size:n="large",text:v,shape:i,logo_alignment:r,width:b,locale:j,click_listener:M,containerProps:g,...k}){const A=e.useRef(null),{clientId:C,scriptLoadedSuccessfully:I}=P(),R=e.useRef(o);R.current=o;const m=e.useRef(t);m.current=t;const D=e.useRef(l);return D.current=l,e.useEffect(()=>{var p,h,_,E,S,y,x,G,L;if(I)return(_=(h=(p=window==null?void 0:window.google)===null||p===void 0?void 0:p.accounts)===null||h===void 0?void 0:h.id)===null||_===void 0||_.initialize({client_id:C,callback:s=>{var a;if(!(s!=null&&s.credential))return(a=m.current)===null||a===void 0?void 0:a.call(m);const{credential:f,select_by:q}=s;R.current({credential:f,clientId:Q(s),select_by:q})},...k}),(y=(S=(E=window==null?void 0:window.google)===null||E===void 0?void 0:E.accounts)===null||S===void 0?void 0:S.id)===null||y===void 0||y.renderButton(A.current,{type:u,theme:d,size:n,text:v,shape:i,logo_alignment:r,width:b,locale:j,click_listener:M}),c&&((L=(G=(x=window==null?void 0:window.google)===null||x===void 0?void 0:x.accounts)===null||G===void 0?void 0:G.id)===null||L===void 0||L.prompt(D.current)),()=>{var s,a,f;c&&((f=(a=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.accounts)===null||a===void 0?void 0:a.id)===null||f===void 0||f.cancel())}},[C,I,c,u,d,n,v,i,r,b,j]),O.createElement("div",{...g,ref:A,style:{height:U[n],...g==null?void 0:g.style}})}const Y=()=>{const o=F(),t=H(),c=async u=>{if(u.credential){const n=(await o(N(u.credential))).payload;n.status==="success"?t("/"):n.status==409&&V.error(n.message)}},l=async()=>{console.log("Error Occured")};return w.jsx(w.Fragment,{children:w.jsx(K,{clientId:"686952413069-mu14ppoaajuiuv03r2b5noletf2qvpj7.apps.googleusercontent.com",children:w.jsx(W,{onSuccess:c,onError:l,width:"380"})})})};export{Y as G};
