import{r as e,R as O,b as F,u as H,j as w,g as N,B as P}from"./index-ZbWYSfd7.js";function V(o={}){const{nonce:n,onScriptLoadSuccess:c,onScriptLoadError:l}=o,[u,d]=e.useState(!1),t=e.useRef(c);t.current=c;const v=e.useRef(l);return v.current=l,e.useEffect(()=>{const i=document.createElement("script");return i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.nonce=n,i.onload=()=>{var r;d(!0),(r=t.current)===null||r===void 0||r.call(t)},i.onerror=()=>{var r;d(!1),(r=v.current)===null||r===void 0||r.call(v)},document.body.appendChild(i),()=>{document.body.removeChild(i)}},[n]),u}const B=e.createContext(null);function J({clientId:o,nonce:n,onScriptLoadSuccess:c,onScriptLoadError:l,children:u}){const d=V({nonce:n,onScriptLoadSuccess:c,onScriptLoadError:l}),t=e.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:d}),[o,d]);return O.createElement(B.Provider,{value:t},u)}function K(){const o=e.useContext(B);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function Q(o){var n;return(n=o==null?void 0:o.clientId)!==null&&n!==void 0?n:o==null?void 0:o.client_id}const U={large:40,medium:32,small:20};function W({onSuccess:o,onError:n,useOneTap:c,promptMomentNotification:l,type:u="standard",theme:d="outline",size:t="large",text:v,shape:i,logo_alignment:r,width:L,locale:j,click_listener:M,containerProps:g,...k}){const A=e.useRef(null),{clientId:C,scriptLoadedSuccessfully:I}=K(),R=e.useRef(o);R.current=o;const m=e.useRef(n);m.current=n;const D=e.useRef(l);return D.current=l,e.useEffect(()=>{var p,h,_,y,S,E,x,b,G;if(I)return(_=(h=(p=window==null?void 0:window.google)===null||p===void 0?void 0:p.accounts)===null||h===void 0?void 0:h.id)===null||_===void 0||_.initialize({client_id:C,callback:s=>{var a;if(!(s!=null&&s.credential))return(a=m.current)===null||a===void 0?void 0:a.call(m);const{credential:f,select_by:q}=s;R.current({credential:f,clientId:Q(s),select_by:q})},...k}),(E=(S=(y=window==null?void 0:window.google)===null||y===void 0?void 0:y.accounts)===null||S===void 0?void 0:S.id)===null||E===void 0||E.renderButton(A.current,{type:u,theme:d,size:t,text:v,shape:i,logo_alignment:r,width:L,locale:j,click_listener:M}),c&&((G=(b=(x=window==null?void 0:window.google)===null||x===void 0?void 0:x.accounts)===null||b===void 0?void 0:b.id)===null||G===void 0||G.prompt(D.current)),()=>{var s,a,f;c&&((f=(a=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.accounts)===null||a===void 0?void 0:a.id)===null||f===void 0||f.cancel())}},[C,I,c,u,d,t,v,i,r,L,j]),O.createElement("div",{...g,ref:A,style:{height:U[t],...g==null?void 0:g.style}})}const Y=()=>{const o=F(),n=H(),c=async u=>{if(u.credential){const t=(await o(N(u.credential))).payload;console.log("Payload Data",t),t.status==="success"?n("/"):t.status==409&&P.error(t.message)}},l=async()=>{console.log("Error Occured")};return w.jsx(w.Fragment,{children:w.jsx(J,{clientId:"686952413069-mu14ppoaajuiuv03r2b5noletf2qvpj7.apps.googleusercontent.com",children:w.jsx(W,{onSuccess:c,onError:l,width:"300"})})})};export{Y as G};
