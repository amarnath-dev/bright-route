import{r as n,d as y,u as N,B as u,j as e,e as r,F as p}from"./index-BH-Ykf6z.js";import{A as k}from"./index-CwJORwgX.js";import"./index-BVfO-N0a.js";import"./sweetalert2.all-D9aI5KS5.js";function v(s,o){const[h,l]=n.useState(s);return n.useEffect(()=>{const m=setTimeout(()=>{l(s)},o);return()=>{clearTimeout(m)}},[s,o]),h}const S=()=>{const s=y(),[o,h]=n.useState([]),[l,m]=n.useState(""),g=N(),b=v(l,500);n.useEffect(()=>{(async()=>{var i;try{const t=await s.get("/admin/mentee",{withCredentials:!0});t.data&&h((i=t.data)==null?void 0:i.mentees)}catch(t){console.log(t)}})()},[s]);const x=async(a,i)=>{try{if(i==="block"){const t=await s.patch(`/admin/block/${a}`,{},{withCredentials:!0});if(t.data.status==="success"){const d=o.map(c=>(c==null?void 0:c._id)===a?{...c,is_blocked:!0}:c);h(d),u.success(t.data.message)}}else{const t=await s.patch(`/admin/unblock/${a}`,{},{withCredentials:!0});if(t.data.status==="success"){const d=o.map(c=>(c==null?void 0:c._id)===a?{...c,is_blocked:!1}:c);h(d),u.success(t.data.message)}}}catch(t){console.log(t)}};n.useEffect(()=>{l&&((async()=>{try{const a=await s.get(`/admin/mentee/search?name=${l}`);console.log(a)}catch(a){console.log(a),u.error("Search Failed")}})(),console.log("API call with:",b))},[s,b,l]),n.useEffect(()=>{},[s,l,m]);const f=()=>{try{console.log("Get Next")}catch(a){console.log(a)}};return e(p,{children:r("div",{className:"grid grid-cols-12 h-screen bg-background-two",children:[e("div",{className:"hidden md:block col-span-3",children:e(k,{})}),r("div",{className:"col-span-12 md:col-span-9 h-screen px-2 py-2",children:[e("div",{className:"mt-4",children:e("div",{children:r("h1",{className:"font-bold text-gray-400",children:[e("span",{onClick:()=>g("/admin/dashboard"),className:"cursor-pointer",children:"Dashboard"}),"/ ",e("small",{children:"Mentee Management"})]})})}),e("div",{className:"mt-5 mb-2 w-full",children:e("div",{children:e("input",{type:"text",id:"simple-search",value:l,onChange:a=>m(a.target.value),className:"border-gray-500 text-sm rounded block ps-5 p-2.5 bg-gray-800 text-gray-400",placeholder:"Search Users..."})})}),o.length>0?r(p,{children:[e("div",{className:"relative overflow-x-auto py-10",children:r("table",{className:"w-full text-sm text-left rtl:text-right rounded",children:[e("thead",{className:"text-xs border border-gray-800 rounded-md",children:r("tr",{className:"text-gray-400",children:[e("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e("th",{scope:"col",className:"px-6 py-3",children:"Email"}),e("th",{scope:"col",className:"px-6 py-3",children:"Block/Unblock"})]})}),o.map((a,i)=>{var t,d;return e(p,{children:e("tbody",{children:r("tr",{className:"bg-gray-800 border-b text-gray-400",children:[r("th",{scope:"row",className:"px-6 py-4 font-medium",children:[(t=a.profileDetails)==null?void 0:t.first_name," ",(d=a.profileDetails)==null?void 0:d.last_name]}),e("td",{className:"px-6 py-4",children:a==null?void 0:a.email}),e("td",{className:"px-6 py-4",children:a.is_blocked?e("button",{className:"py-1 px-5 rounded bg-color-five text-black",onClick:()=>x(a==null?void 0:a._id,"unblock"),children:"Unblock"}):e("button",{className:"py-1 px-5 rounded bg-red-600 hover:bg-red-500 text-black",onClick:()=>x(a==null?void 0:a._id,"block"),children:"Block"})})]})},i)})})]})}),e("div",{className:"flex w-full flex-col items-end",children:r("div",{className:"inline-flex mt-2 xs:mt-0",children:[e("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-color-one rounded text-white",children:"Prev"}),e("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-gray-200 hover:bg-gray-300 border-0 border-s rounded-e",onClick:f,children:"Next"})]})})]}):e(p,{children:e("div",{children:e("h1",{className:"text-3xl text-gray-400 py-5",children:"Not Mentees are Available"})})})]})]})})};export{S as default};
