import{d as b,r as i,u as j,j as s,B as p}from"./index-0cbBuzyu.js";import{A as g}from"./AdminSidebar-bzpTPOwm.js";import"./index-gKoOA1Ig.js";import"./sweetalert2.all-yZvuN_lf.js";const k=()=>{const r=b(),[n,o]=i.useState([]),[d,x]=i.useState(""),m=j();i.useEffect(()=>{(async()=>{var c;try{const a=await r.get("/admin/mentee",{withCredentials:!0});a.data&&o((c=a.data)==null?void 0:c.mentees)}catch(a){console.log(a)}})()},[r]);const h=async(e,c)=>{try{if(c==="block"){const a=await r.patch(`/admin/block/${e}`,{},{withCredentials:!0});if(a.data.status==="success"){const l=n.map(t=>(t==null?void 0:t._id)===e?{...t,is_blocked:!0}:t);o(l),p.success(a.data.message)}}else{const a=await r.patch(`/admin/unblock/${e}`,{},{withCredentials:!0});if(a.data.status==="success"){const l=n.map(t=>(t==null?void 0:t._id)===e?{...t,is_blocked:!1}:t);o(l),p.success(a.data.message)}}}catch(a){console.log(a)}},u=e=>{x(e.target.value)};return i.useEffect(()=>{(async()=>{try{const c=await r.post("/admin/mentee/search",{search:d},{withCredentials:!0});console.log(c)}catch(c){console.log(c)}})()},[r,d,x]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid grid-cols-12 h-screen bg-background-two",children:[s.jsx("div",{className:"hidden md:block col-span-3",children:s.jsx(g,{})}),s.jsxs("div",{className:"col-span-12 md:col-span-9 h-screen px-2 py-2",children:[s.jsx("div",{className:"mt-4",children:s.jsx("div",{children:s.jsxs("h1",{className:"font-bold text-gray-400",children:[s.jsx("span",{onClick:()=>m("/admin/dashboard"),className:"cursor-pointer",children:"Dashboard"})," ","/ ",s.jsx("small",{children:"Mentee Management"})]})})}),s.jsx("div",{className:"mt-5 mb-2 w-full",children:s.jsx("div",{children:s.jsx("input",{type:"text",id:"simple-search",value:d,onChange:u,className:"border-gray-500 text-sm rounded block ps-5 p-2.5 bg-gray-800 text-gray-400",placeholder:"Search Users..."})})}),n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left rtl:text-right rounded",children:[s.jsx("thead",{className:"text-xs border border-gray-800 rounded-md",children:s.jsxs("tr",{className:"text-gray-400",children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Reports"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"View"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Block/Unblock"})]})}),n.map((e,c)=>{var a,l;return s.jsx(s.Fragment,{children:s.jsx("tbody",{children:s.jsxs("tr",{className:"bg-gray-800 border-b text-gray-400",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium",children:[(a=e.profileDetails)==null?void 0:a.first_name," ",(l=e.profileDetails)==null?void 0:l.last_name]}),s.jsx("td",{className:"px-6 py-4",children:e==null?void 0:e.email}),s.jsx("td",{className:"px-6 py-4",children:"0"}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{className:"underline hover:text-blue-500",children:"View"})}),s.jsx("td",{className:"px-6 py-4",children:e.is_blocked?s.jsx("button",{className:"py-1 px-5 rounded bg-color-five text-black",onClick:()=>h(e==null?void 0:e._id,"unblock"),children:"Unblock"}):s.jsx("button",{className:"py-1 px-5 rounded bg-red-600 hover:bg-red-500 text-black",onClick:()=>h(e==null?void 0:e._id,"block"),children:"Block"})})]})},c)})})]})}),s.jsx("div",{className:"flex w-full flex-col items-end",children:s.jsxs("div",{className:"inline-flex mt-2 xs:mt-0",children:[s.jsx("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-color-one rounded text-white",children:"Prev"}),s.jsx("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-gray-200 hover:bg-gray-300 border-0 border-s rounded-e",children:"Next"})]})})]}):s.jsx(s.Fragment,{children:s.jsx("div",{children:s.jsx("h1",{className:"text-3xl text-gray-400 py-5",children:"Not Mentees are Available"})})})]})]})})};export{k as default};
