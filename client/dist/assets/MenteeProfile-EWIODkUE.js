import{j as e,r as l,a as $,d as z,L as K,k as D,l as Z,B as _,o as ee,m as H}from"./index-ZbWYSfd7.js";import{B as te,d as se,X as ae,y as re,I as ne,H as le}from"./index-kYCaXRqc.js";import oe from"./Navbar-0n8U2OQz.js";/* empty css                  */import{s as ie}from"./useThemeProps-_l7aVjHF.js";import"./ButtonBase-Z9chf2eE.js";import"./TransitionGroupContext-7nLNrPD2.js";import"./createSvgIcon-pRzNGoO8.js";import"./createSvgIcon-6i-2qBXZ.js";import"./Toast-7kIuDuDo.js";import"./index-WSgq0TVm.js";import"./index-VSl0TVfG.js";/* empty css                     */import"./index-CUx-uIXr.js";const ce=()=>e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-center items-center mt-2 px-4",children:e.jsxs("div",{className:"flex-1 text-sm ring-1 ring-[#fff7625c] bg-gray-800 px-2 py-2 md:px-4 md:py-4 rounded-md",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("h1",{className:"font-bold text-color-five",children:"Tips"}),e.jsx("img",{src:"https://www.google.com/images/hpp/gemini-48x48px.png",alt:"",className:"ml-1 h-6 w-6"})]}),e.jsxs("ul",{className:"text-gray-400",children:[e.jsx("li",{className:"text-md md:mt-2",children:"Adding your photo and social media profiles helps mentors feel confident that youâ€™re a real person (e.g. not a bot)."}),e.jsx("li",{className:"text-md md:mt-2",children:"Your profile is only visible to mentors that you send applications to. It is not indexed on search engines like Google."})]})]})})})}),de=Math.PI/180;async function me(a,d,m,f=1,y=0){const o=d.getContext("2d");if(!o)throw new Error("No 2d context");const I=a.naturalWidth/a.width,j=a.naturalHeight/a.height,h=window.devicePixelRatio;d.width=Math.floor(m.width*I*h),d.height=Math.floor(m.height*j*h),o.scale(h,h),o.imageSmoothingQuality="high";const S=m.x*I,g=m.y*j,v=y*de,N=a.naturalWidth/2,x=a.naturalHeight/2;o.save(),o.translate(-S,-g),o.translate(N,x),o.rotate(v),o.scale(f,f),o.translate(-N,-x),o.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,0,0,a.naturalWidth,a.naturalHeight),o.restore()}function ue(a,d,m){l.useEffect(()=>{const f=setTimeout(()=>{a()},d);return()=>{clearTimeout(f)}},[m,a,d])}const fe=ie("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Se=()=>{const{user:a}=$(s=>s.userAuth),d=z(),[m,f]=l.useState(!1),[y,o]=l.useState(""),[I,j]=l.useState(""),[h,S]=l.useState(""),[g,v]=l.useState(16/9),[N,x]=l.useState(),p=l.useRef(null),[i,P]=l.useState(),k=l.useRef(null),C=l.useRef(""),R=l.useRef(null),[M,W]=l.useState(""),[n,E]=l.useState({profile_img:"",first_name:"",last_name:"",email:"",country:"",job_title:"",linkedIn:"",twitter:"",goal:""}),w=s=>{const{name:t,value:r}=s.target;E({...n,[t]:r})};l.useEffect(()=>{(async()=>{var t,r;try{const c=(await d.get(`/managment/${a==null?void 0:a._id}`,{withCredentials:!0})).data.menteeDetails[0];o((t=c.menteeProfile)==null?void 0:t.goal),j((r=c.menteeProfile)==null?void 0:r.profile_img),E(c.menteeProfile),W(c==null?void 0:c.email)}catch(u){console.log(u)}})()},[d,a==null?void 0:a._id]),n.profile_img&&(async()=>{const t=n.profile_img;if(t){const r=D(H,t);Z(r).then(u=>{const c=document.getElementById("profile-image");c.src=u}).catch(u=>{console.log(u)})}})();const X=async s=>{s.preventDefault(),n.goal=y;try{const t=await d.post("/managment/profie-update",n,{withCredentials:!0});if(t){const r=t.data;r.status=="success"&&_.success(r.message)}}catch(t){_.error("Something went wrong"),console.log(t)}};function L(s,t,r){return ne(le({unit:"%",width:90},r,s,t),s,t)}const Y=s=>{if(s.target.files&&s.target.files.length>0){x(void 0);const t=new FileReader;t.addEventListener("load",()=>{var r;S(((r=t.result)==null?void 0:r.toString())||"")}),t.readAsDataURL(s.target.files[0])}},O=s=>{if(g){const{width:t,height:r}=s.currentTarget;x(L(t,r,g))}};function G(){if(g)v(void 0);else if(v(15/8),p.current){const{width:s,height:t}=p.current,r=L(s,t,16/9);x(r),P(re(r,s,t))}}async function q(){var T,U;const s=p.current,t=k.current;if(!s||!t||!i)throw new Error("Crop canvas does not exist");const r=s.naturalWidth/s.width,u=s.naturalHeight/s.height,c=new OffscreenCanvas(i.width*r,i.height*u),A=c.getContext("2d");if(!A)throw new Error("No 2d context");A.drawImage(t,0,0,t.width,t.height,0,0,c.width,c.height);const F=await c.convertToBlob({type:"image/png"});if(C.current&&URL.revokeObjectURL(C.current),C.current=URL.createObjectURL(F),R.current){R.current.href=C.current;const J=Math.random().toString(16).slice(2)+(new Date().getTime()/1e3).toString(),Q=D(H,J),B=await ee(Q,F);if(B.metadata){const V=B.metadata.fullPath,b=await d.post("/managment/profieImage-update",{img_firebase_id:V},{withCredentials:!0});((T=b==null?void 0:b.data)==null?void 0:T.status)==="success"?(_.success((U=b==null?void 0:b.data)==null?void 0:U.message),location.reload()):_.error("Image Updation Failed")}}}return ue(async()=>{i!=null&&i.width&&(i!=null&&i.height)&&p.current&&k.current&&me(p.current,k.current,i)},100,[i]),e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx("div",{className:"w-full h-full flex justify-center bg-background-two",children:e.jsxs("div",{className:"w-full md:w-2/3 h-full border border-gray-500 mt-10 rounded-md",children:[e.jsxs("div",{className:"w-full h-full flex justify-center flex-col",children:[e.jsx("h1",{className:"text-center mt-4 text-md md:text-lg font-bold text-gray-400",children:"Personal Information"}),e.jsx(ce,{})]}),e.jsx("div",{className:"flex justify-between px-2",children:e.jsx("div",{className:"flex justify-center px-4 items-center",children:e.jsx(K,{to:"/managment/password",className:"text-blue-500 underline",children:"Change Password"})})}),n!=null&&n.profile_img?"":e.jsx("div",{className:"flex flex-col ml-6",children:e.jsx("h1",{className:"font-bold text-gray-400",children:"Please Add a profile Image"})}),e.jsx("div",{className:"px-2 md:px-5 md:py-2 flex items-center",children:e.jsxs("div",{className:"flex w-full flex-row items-center",children:[e.jsx("span",{className:"flex items-center h-36 w-36 rounded-full overflow-hidden md:ml-4",children:e.jsx("img",{src:n!=null&&n.profile_img?"":"https://cdn.pixabay.com/photo/2018/11/13/21/43/avatar-3814049_640.png",alt:"profile_img",className:"md:h-28 md:w-28 rounded-full object-cover",id:"profile-image"})}),e.jsxs("div",{className:"px-6 md:px-0 w-full",children:[e.jsxs(te,{onClick:()=>f(!0),id:"img_btn",style:{background:"rgb(31 41 55)",color:"white",border:"1px solid black"},component:"label",variant:"contained",startIcon:e.jsx(se,{}),children:["Upload Photo",e.jsx(fe,{type:"file",accept:"image/*",onChange:Y,onClick:G})]}),m?e.jsxs("div",{children:[!!h&&e.jsx("div",{className:"w-full",children:e.jsx(ae,{crop:N,onChange:(s,t)=>x(t),onComplete:s=>P(s),aspect:g,minWidth:100,minHeight:100,children:e.jsx("img",{width:300,ref:p,alt:"Crop Me",src:h,onLoad:O})})}),!!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("canvas",{ref:k,style:{border:"1px solid black",objectFit:"contain",width:i.width,height:i.height}})}),e.jsxs("div",{children:[e.jsx("button",{onClick:q,className:"border-2 px-1 py-1 bg-color-one text-white rounded-md",children:"Save Image"}),e.jsx("button",{className:"border-2 py-1 px-1 rounded-md bg-color-five",onClick:()=>f(!1),children:"Discard"}),e.jsx("a",{href:"#hidden",ref:R,download:!0,style:{position:"absolute",top:"-200vh",visibility:"hidden"},children:"Hidden download"})]})]})]}):""]})]})}),e.jsxs("form",{onSubmit:X,className:"w-full px-3 md:px-0",children:[e.jsxs("div",{className:"flex flex-col w-full md:flex-row justify-center text-gray-400",children:[e.jsxs("label",{children:[e.jsx("span",{className:"text-gray-400",children:"First Name"}),e.jsx("input",{id:"first_name",className:"placeholder:text-black field mt-1 block bg-gray-800 text-gray-400 border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"first_name",onChange:w,value:n.first_name})]}),e.jsxs("label",{className:"mt-2 md:mt-0",children:[e.jsx("span",{className:"text-gray-400",children:"Last name"}),e.jsx("input",{id:"last_name",className:"placeholder:text-black field mt-1 block bg-gray-800 border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 md:ml-2 sm:text-sm",type:"text",name:"last_name",value:n.last_name,onChange:w})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center",children:[e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Email"}),e.jsx("input",{id:"email",className:"placeholder:text-black field mt-1 block bg-gray-800 text-gray-400 border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"email",disabled:!0,value:M,onChange:w})]}),e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Job Title"}),e.jsx("input",{id:"job_title",className:"placeholder:text-black field mt-1 block bg-gray-800 text-gray-400 border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm md:ml-3",type:"text",name:"job_title",value:n.job_title,onChange:w})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center",children:[e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"LinkedIn"}),e.jsx("input",{id:"linkedIn",className:"placeholder:text-black field mt-1 block bg-gray-800 text-gray-400 border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"linkedIn",onChange:w,value:n.linkedIn})]}),e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Twitter"}),e.jsx("input",{id:"twitter",className:"placeholder:text-black field mt-1 block bg-gray-800 border-gray-800 text-gray-400 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 md:ml-2 sm:text-sm",type:"text",name:"twitter",value:n.twitter,onChange:w})]})]}),e.jsxs("div",{className:"ml-1 md:ml-0 mr-2 md:mr-10 w-full md:px-9",children:[e.jsx("label",{htmlFor:"message",className:"block mt-4 mb-2 text-sm font-medium"}),e.jsx("span",{className:"text-gray-400",children:"Goal"}),e.jsx("textarea",{id:"goal",rows:4,name:"goal",value:y,onChange:s=>o(s.target.value),className:"placeholder:text-black field block mt-1 p-3 w-full text-sm bg-gray-800 text-gray-400 rounded-lg border border-gray-800 focus:outline-none focus:ring-dark-500 focus:ring-1"}),e.jsx("h1",{className:"mt-2 text-sm text-gray-400",children:"It's good practice to build mentorship around a long-term goal of yours. This is shared with mentors."})]}),e.jsx("div",{className:"flex md:justify-end justify-center md:px-9",children:e.jsx("button",{type:"submit",id:"saveBtn",className:"px-2 py-2 md:px-2 md:py-2 rounded-md bg-color-five text-white mb-4",children:"Save Changes"})})]})]})})]})};export{Se as default};
