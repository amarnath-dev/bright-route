import{j as e,a as V,d as W,r,L as $,k as P,l as z,B as p,o as K,m as U}from"./index-U6pLF9IQ.js";import{B as Q,d as Z,X as ee,y as te,I as se,H as ae}from"./index-pv88ZcPs.js";import le from"./Navbar-ASklzmnE.js";/* empty css                  */import{s as re}from"./useThemeProps-m026KTGC.js";import"./ButtonBase-r1GM1THH.js";import"./TransitionGroupContext-ctz6-4QQ.js";import"./createSvgIcon-sYhRqDlc.js";import"./createSvgIcon-oa3XZe4r.js";import"./Toast-l5WmMzK0.js";import"./index-yqu_i9QZ.js";import"./index-h37FOU6j.js";import"./index-CUx-uIXr.js";const ne=()=>e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-center items-center mt-2 px-4",children:e.jsxs("div",{className:"flex-1 text-sm ring-1 ring-[#fff7625c] bg-gray-800 px-2 py-2 md:px-4 md:py-4 rounded-md",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("h1",{className:"font-bold text-color-five",children:"Tips"}),e.jsx("img",{src:"https://www.google.com/images/hpp/gemini-48x48px.png",alt:"",className:"ml-1 h-6 w-6"})]}),e.jsxs("ul",{className:"text-gray-400",children:[e.jsx("li",{className:"text-md md:mt-2",children:"Adding your photo and social media profiles helps mentors feel confident that youâ€™re a real person (e.g. not a bot)."}),e.jsx("li",{className:"text-md md:mt-2",children:"Your profile is only visible to mentors that you send applications to. It is not indexed on search engines like Google."})]})]})})})}),oe=re("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),ve=()=>{const{user:n}=V(s=>s.userAuth),f=W(),[B,b]=r.useState(!1),[j,y]=r.useState(""),[ie,D]=r.useState(""),[v,E]=r.useState(""),[h,N]=r.useState(16/9),[T,u]=r.useState(),x=r.useRef(null),[o,k]=r.useState(),C=r.useRef(null),g=r.useRef(""),w=r.useRef(null),[l,_]=r.useState({profile_img:"",first_name:"",last_name:"",email:"",country:"",job_title:"",linkedIn:"",twitter:"",goal:"",available_time:"",region:""}),i=s=>{const{name:t,value:a}=s.target;_({...l,[t]:a})};r.useEffect(()=>{(async()=>{try{const a=(await f.get(`/managment/${n==null?void 0:n._id}`,{withCredentials:!0})).data;y(a.menteeDetails.goal),D(a.menteeDetails.profile_img),_(a.menteeDetails)}catch(t){console.log(t)}})()},[f,n==null?void 0:n._id]),l.profile_img&&(async()=>{const t=l.profile_img;if(t){const a=P(U,t);z(a).then(m=>{const c=document.getElementById("profile-image");c.src=m}).catch(m=>{console.log(m)})}})();const H=async s=>{s.preventDefault(),l.goal=j;try{const t=await f.post("/managment/profie-update",l,{withCredentials:!0});if(t){const a=t.data;a.status=="success"&&p.success(a.message)}}catch(t){p.error("Something went wrong"),console.log(t)}};function I(s,t,a){return se(ae({unit:"%",width:90},a,s,t),s,t)}const M=s=>{if(s.target.files&&s.target.files.length>0){u(void 0);const t=new FileReader;t.addEventListener("load",()=>{var a;E(((a=t.result)==null?void 0:a.toString())||"")}),t.readAsDataURL(s.target.files[0])}},G=s=>{if(h){const{width:t,height:a}=s.currentTarget;u(I(t,a,h))}};function O(){if(h)N(void 0);else if(N(15/8),x.current){const{width:s,height:t}=x.current,a=I(s,t,16/9);u(a),k(te(a,s,t))}}async function X(){var L,A;const s=x.current,t=C.current;if(!s||!t||!o)throw new Error("Crop canvas does not exist");const a=s.naturalWidth/s.width,m=s.naturalHeight/s.height,c=new OffscreenCanvas(o.width*a,o.height*m),S=c.getContext("2d");if(!S)throw new Error("No 2d context");S.drawImage(t,0,0,t.width,t.height,0,0,c.width,c.height);const R=await c.convertToBlob({type:"image/png"});if(g.current&&URL.revokeObjectURL(g.current),g.current=URL.createObjectURL(R),w.current){w.current.href=g.current;const Y=Math.random().toString(16).slice(2)+(new Date().getTime()/1e3).toString(),q=P(U,Y),F=await K(q,R);if(F.metadata){const J=F.metadata.fullPath,d=await f.post("/managment/profieImage-update",{img_firebase_id:J},{withCredentials:!0});((L=d==null?void 0:d.data)==null?void 0:L.status)==="success"?(p.success((A=d==null?void 0:d.data)==null?void 0:A.message),location.reload()):p.error("Image Updation Failed")}}}return e.jsxs(e.Fragment,{children:[e.jsx(le,{}),e.jsx("div",{className:"w-full h-full flex justify-center bg-background-two",children:e.jsxs("div",{className:"w-full md:w-2/3 h-full border border-gray-500 mt-10 rounded-md",children:[e.jsxs("div",{className:"w-full h-full flex justify-center flex-col",children:[e.jsx("h1",{className:"text-center mt-4 text-md md:text-lg font-bold text-white",children:"Personal Information"}),e.jsx(ne,{})]}),e.jsx("div",{className:"flex justify-between px-2",children:e.jsx("div",{className:"flex justify-center px-4 items-center",children:e.jsx($,{to:"/managment/password",className:"text-blue-500 underline",children:"Change Password"})})}),l!=null&&l.profile_img?"":e.jsx("div",{className:"flex flex-col ml-6",children:e.jsx("h1",{className:"font-bold",children:"Add a profile Image"})}),e.jsx("div",{className:"px-2 md:px-5 md:py-2 flex items-center",children:e.jsxs("div",{className:"flex w-full flex-row items-center",children:[e.jsx("span",{className:"flex items-center h-36 w-36 rounded-full overflow-hidden md:ml-4",children:e.jsx("img",{src:l!=null&&l.profile_img?"":"https://cdn.pixabay.com/photo/2018/11/13/21/43/avatar-3814049_640.png",alt:"profile_img",className:"md:h-28 md:w-28 rounded-full object-cover",id:"profile-image"})}),e.jsxs("div",{className:"px-6 md:px-0 w-full",children:[e.jsxs(Q,{onClick:()=>b(!0),id:"img_btn",style:{background:"rgb(31 41 55)",color:"white",border:"1px solid black"},component:"label",variant:"contained",startIcon:e.jsx(Z,{}),children:["Upload Photo",e.jsx(oe,{type:"file",accept:"image/*",onChange:M,onClick:O})]}),B?e.jsxs("div",{children:[!!v&&e.jsx("div",{className:"w-full",children:e.jsx(ee,{crop:T,onChange:(s,t)=>u(t),onComplete:s=>k(s),aspect:h,minWidth:100,minHeight:100,children:e.jsx("img",{width:300,ref:x,alt:"Crop Me",src:v,onLoad:G})})}),!!o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("canvas",{ref:C,style:{border:"1px solid black",objectFit:"contain",width:o.width,height:o.height}})}),e.jsxs("div",{children:[e.jsx("button",{onClick:X,className:"border-2 px-1 py-1 bg-color-one text-white rounded-md",children:"Save Image"}),e.jsx("button",{className:"border-2 py-1 px-1 rounded-md bg-color-five",onClick:()=>b(!1),children:"Discard"}),e.jsx("a",{href:"#hidden",ref:w,download:!0,style:{position:"absolute",top:"-200vh",visibility:"hidden"},children:"Hidden download"})]})]})]}):""]})]})}),e.jsxs("form",{onSubmit:H,className:"w-full px-3 md:px-0",children:[e.jsxs("div",{className:"flex flex-col w-full md:flex-row justify-center",children:[e.jsxs("label",{children:[e.jsx("span",{className:"text-gray-400",children:"First Name"}),e.jsx("input",{id:"first_name",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"first_name",onChange:i,value:l.first_name})]}),e.jsxs("label",{className:"mt-2 md:mt-0",children:[e.jsx("span",{className:"text-gray-400",children:"Last name"}),e.jsx("input",{id:"last_name",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 md:ml-2 sm:text-sm",type:"text",name:"last_name",value:l.last_name,onChange:i})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center",children:[e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Email"}),e.jsx("input",{id:"email",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"email",value:l.email,onChange:i})]}),e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Job Title"}),e.jsx("input",{id:"job_title",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm md:ml-3",type:"text",name:"job_title",value:l.job_title,onChange:i})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center",children:[e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"LinkedIn"}),e.jsx("input",{id:"linkedIn",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"linkedIn",onChange:i,value:l.linkedIn})]}),e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Twitter"}),e.jsx("input",{id:"twitter",className:"placeholder:text-black field mt-1 block bg-gray-800 border-gray-800 text-white rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 md:ml-2 sm:text-sm",type:"text",name:"twitter",value:l.twitter,onChange:i})]})]}),e.jsxs("div",{className:"ml-1 md:ml-0 mr-2 md:mr-10 w-full md:px-9",children:[e.jsx("label",{htmlFor:"message",className:"block mt-4 mb-2 text-sm font-medium"}),e.jsx("span",{className:"text-gray-400",children:"Goal"}),e.jsx("textarea",{id:"goal",rows:4,name:"goal",value:j,onChange:s=>y(s.target.value),className:"placeholder:text-black field block mt-1 p-3 w-full text-sm bg-gray-800 text-white rounded-lg border border-gray-800 focus:outline-none focus:ring-dark-500 focus:ring-1"}),e.jsx("h1",{className:"mt-2 text-sm text-gray-400",children:"It's good practice to build mentorship around a long-term goal of yours. This is shared with mentors."})]}),e.jsx("div",{className:"flex md:justify-end justify-center md:px-9",children:e.jsx("button",{type:"submit",id:"saveBtn",className:"px-2 py-2 md:px-2 md:py-2 rounded-md bg-color-five text-white mb-4",children:"Save Changes"})})]})]})})]})};export{ve as default};
