import{j as e,r as l,a as z,d as K,L as Z,e as U,g as ee,f as te,B as H,s as M}from"./index-OOUbbyCE.js";import{B as se,d as ae,X as ne,y as re,I as le,H as oe}from"./index-ac4b7TI0.js";import{N as ie,a as ce}from"./Navbar-sNVkRa_d.js";/* empty css                  */import{S as I}from"./sweetalert2.all-ofjOeDPq.js";import{s as de}from"./generateUtilityClasses-o__dUuSr.js";import"./ButtonBase-mXNp7VbI.js";import"./useTimeout-d6sbsx6h.js";import"./TransitionGroupContext-4YwMI0wk.js";import"./createSvgIcon-4WGjJCwP.js";import"./createSvgIcon-pQwWrd8a.js";import"./ownerWindow-bNUyy386.js";import"./Toast-_tPr2boB.js";import"./index-ry2Amagv.js";import"./index-5l9d6-G0.js";/* empty css                     */const me=()=>e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("div",{className:"flex justify-center items-center mt-2 px-4",children:e.jsxs("div",{className:"flex-1 text-sm ring-1 ring-[#fff7625c] bg-gray-800 px-2 py-2 md:px-4 md:py-4 rounded-md",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("h1",{className:"font-bold text-color-five",children:"Tips"}),e.jsx("img",{src:"https://www.google.com/images/hpp/gemini-48x48px.png",alt:"",className:"ml-1 h-6 w-6"})]}),e.jsxs("ul",{className:"text-white",children:[e.jsx("li",{className:"text-md md:mt-2",children:"Adding your photo and social media profiles helps mentors feel confident that youâ€™re a real person (e.g. not a bot)."}),e.jsx("li",{className:"text-md md:mt-2",children:"Your profile is only visible to mentors that you send applications to. It is not indexed on search engines like Google."})]})]})})})}),he=Math.PI/180;async function ue(n,d,h,u=1,j=0){const o=d.getContext("2d");if(!o)throw new Error("No 2d context");const _=n.naturalWidth/n.width,y=n.naturalHeight/n.height,f=window.devicePixelRatio;d.width=Math.floor(h.width*_*f),d.height=Math.floor(h.height*y*f),o.scale(f,f),o.imageSmoothingQuality="high";const S=h.x*_,g=h.y*y,v=j*he,N=n.naturalWidth/2,x=n.naturalHeight/2;o.save(),o.translate(-S,-g),o.translate(N,x),o.rotate(v),o.scale(u,u),o.translate(-N,-x),o.drawImage(n,0,0,n.naturalWidth,n.naturalHeight,0,0,n.naturalWidth,n.naturalHeight),o.restore()}function fe(n,d,h){l.useEffect(()=>{const u=setTimeout(()=>{n()},d);return()=>{clearTimeout(u)}},[h,n,d])}const xe=de("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Le=()=>{const{user:n}=z(t=>t.userAuth),d=K(),[h,u]=l.useState(!1),[j,o]=l.useState(""),[_,y]=l.useState(""),[f,S]=l.useState(""),[g,v]=l.useState(16/9),[N,x]=l.useState(),p=l.useRef(null),[i,P]=l.useState(),k=l.useRef(null),C=l.useRef(""),R=l.useRef(null),[W,X]=l.useState(""),[r,E]=l.useState({profile_img:"",first_name:"",last_name:"",email:"",country:"",job_title:"",linkedIn:"",twitter:"",goal:""}),w=t=>{const{name:s,value:a}=t.target;E({...r,[s]:a})};l.useEffect(()=>{(async()=>{var s,a;try{const c=(await d.get(`/managment/${n==null?void 0:n._id}`,{withCredentials:!0})).data.menteeDetails[0];o((s=c.menteeProfile)==null?void 0:s.goal),y((a=c.menteeProfile)==null?void 0:a.profile_img),E(c.menteeProfile),X(c==null?void 0:c.email)}catch(m){console.log(m)}})()},[d,n==null?void 0:n._id]),r.profile_img&&(async()=>{const s=r.profile_img;if(s){const a=U(M,s);ee(a).then(m=>{const c=document.getElementById("profile-image");c.src=m}).catch(m=>{console.log(m)})}})();const Y=async t=>{t.preventDefault(),I.fire({title:"Do you want to save the changes?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Save",denyButtonText:"Don't save"}).then(async s=>{if(s.isConfirmed){r.goal=j;try{const a=await d.post("/managment/profie-update",r,{withCredentials:!0});a&&a.data.status==="success"&&I.fire("Saved!","","success")}catch(a){I.fire("Unable to save the changes","","error"),console.log(a)}}else s.isDenied&&I.fire("Changes are not saved","","info")})};function L(t,s,a){return le(oe({unit:"%",width:90},a,t,s),t,s)}const O=t=>{if(t.target.files&&t.target.files.length>0){x(void 0);const s=new FileReader;s.addEventListener("load",()=>{var a;S(((a=s.result)==null?void 0:a.toString())||"")}),s.readAsDataURL(t.target.files[0])}},G=t=>{if(g){const{width:s,height:a}=t.currentTarget;x(L(s,a,g))}};function q(){if(g)v(void 0);else if(v(15/8),p.current){const{width:t,height:s}=p.current,a=L(t,s,16/9);x(a),P(re(a,t,s))}}async function J(){var T,D;const t=p.current,s=k.current;if(!t||!s||!i)throw new Error("Crop canvas does not exist");const a=t.naturalWidth/t.width,m=t.naturalHeight/t.height,c=new OffscreenCanvas(i.width*a,i.height*m),A=c.getContext("2d");if(!A)throw new Error("No 2d context");A.drawImage(s,0,0,s.width,s.height,0,0,c.width,c.height);const B=await c.convertToBlob({type:"image/png"});if(C.current&&URL.revokeObjectURL(C.current),C.current=URL.createObjectURL(B),R.current){R.current.href=C.current;const Q=Math.random().toString(16).slice(2)+(new Date().getTime()/1e3).toString(),V=U(M,Q),F=await te(V,B);if(F.metadata){const $=F.metadata.fullPath,b=await d.post("/managment/profieImage-update",{img_firebase_id:$},{withCredentials:!0});((T=b==null?void 0:b.data)==null?void 0:T.status)==="success"?(H.success((D=b==null?void 0:b.data)==null?void 0:D.message),location.reload()):H.error("Image Updation Failed")}}}return fe(async()=>{i!=null&&i.width&&(i!=null&&i.height)&&p.current&&k.current&&ue(p.current,k.current,i)},100,[i]),e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),e.jsx("div",{className:"w-full h-full flex justify-center bg-background-two",children:e.jsxs("div",{className:"w-full md:w-2/3 h-full border border-gray-500 mt-10 rounded-md",children:[e.jsxs("div",{className:"w-full h-full flex justify-center flex-col",children:[e.jsx("h1",{className:"text-center mt-4 text-md md:text-lg font-bold text-white",children:"Personal Information"}),e.jsx(me,{})]}),e.jsx("div",{className:"flex justify-between px-2",children:e.jsx("div",{className:"flex justify-center px-4 items-center",children:e.jsx(Z,{to:"/managment/password",className:"text-blue-500 underline",children:"Change Password"})})}),r!=null&&r.profile_img?"":e.jsx("div",{className:"flex flex-col ml-6",children:e.jsx("h1",{className:"font-bold text-white",children:"Please Add a profile Image"})}),e.jsx("div",{className:"px-2 md:px-5 md:py-2 flex items-center",children:e.jsxs("div",{className:"flex w-full flex-row items-center",children:[e.jsx("span",{className:"flex items-center h-36 w-36 rounded-full overflow-hidden md:ml-4",children:e.jsx("img",{src:r!=null&&r.profile_img?"":ce,alt:"profile_img",className:"md:h-28 md:w-28 rounded-full object-cover",id:"profile-image"})}),e.jsxs("div",{className:"px-6 md:px-0 w-full",children:[e.jsxs(se,{onClick:()=>u(!0),id:"img_btn",style:{background:"rgb(31 41 55)",color:"white",border:"1px solid black"},component:"label",variant:"contained",startIcon:e.jsx(ae,{}),children:["Upload Photo",e.jsx(xe,{type:"file",accept:"image/*",onChange:O,onClick:q})]}),h?e.jsxs("div",{children:[!!f&&e.jsx("div",{className:"w-full",children:e.jsx(ne,{crop:N,onChange:(t,s)=>x(s),onComplete:t=>P(t),aspect:g,minWidth:100,minHeight:100,children:e.jsx("img",{width:300,ref:p,alt:"Crop Me",src:f,onLoad:G})})}),!!i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("canvas",{ref:k,style:{border:"1px solid black",objectFit:"contain",width:i.width,height:i.height}})}),e.jsxs("div",{children:[e.jsx("button",{onClick:J,className:"border-2 px-1 py-1 bg-color-one text-white rounded-md",children:"Save Image"}),e.jsx("button",{className:"border-2 py-1 px-1 rounded-md bg-color-five",onClick:()=>u(!1),children:"Discard"}),e.jsx("a",{href:"#hidden",ref:R,download:!0,style:{position:"absolute",top:"-200vh",visibility:"hidden"},children:"Hidden download"})]})]})]}):""]})]})}),e.jsxs("form",{onSubmit:Y,className:"w-full px-3 md:px-0",children:[e.jsxs("div",{className:"flex flex-col w-full md:flex-row justify-center text-gray-400",children:[e.jsxs("label",{children:[e.jsx("span",{className:"text-gray-400",children:"First Name"}),e.jsx("input",{id:"first_name",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"first_name",onChange:w,value:r.first_name})]}),e.jsxs("label",{className:"mt-2 md:mt-0",children:[e.jsx("span",{className:"text-gray-400",children:"Last name"}),e.jsx("input",{id:"last_name",className:"placeholder:text-black text-white field mt-1 block bg-gray-800 border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 md:ml-2 sm:text-sm",type:"text",name:"last_name",value:r==null?void 0:r.last_name,onChange:w})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center",children:[e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Email"}),e.jsx("input",{id:"email",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"email",disabled:!0,value:W,onChange:w})]}),e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Job Title"}),e.jsx("input",{id:"job_title",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm md:ml-3",type:"text",name:"job_title",value:r.job_title,onChange:w})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center",children:[e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"LinkedIn"}),e.jsx("input",{id:"linkedIn",className:"placeholder:text-black field mt-1 block bg-gray-800 text-white border-gray-800 rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 sm:text-sm",type:"text",name:"linkedIn",onChange:w,value:r.linkedIn})]}),e.jsxs("label",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-400",children:"Twitter"}),e.jsx("input",{id:"twitter",className:"placeholder:text-black field mt-1 block bg-gray-800 border-gray-800 text-white rounded-md py-3 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-full md:w-96 md:ml-2 sm:text-sm",type:"text",name:"twitter",value:r.twitter,onChange:w})]})]}),e.jsxs("div",{className:"ml-1 md:ml-0 mr-2 md:mr-10 w-full md:px-9",children:[e.jsx("label",{htmlFor:"message",className:"block mt-4 mb-2 text-sm font-medium"}),e.jsx("span",{className:"text-gray-400",children:"Goal"}),e.jsx("textarea",{id:"goal",rows:4,name:"goal",value:j,onChange:t=>o(t.target.value),className:"placeholder:text-black field block mt-1 p-3 w-full text-sm bg-gray-800 text-white rounded-lg border border-gray-800 focus:outline-none focus:ring-dark-500 focus:ring-1"}),e.jsx("h1",{className:"mt-2 text-sm text-white",children:"It's good practice to build mentorship around a long-term goal of yours. This is shared with mentors."})]}),e.jsx("div",{className:"flex md:justify-end justify-center md:px-9",children:e.jsx("button",{type:"submit",id:"saveBtn",className:"px-2 py-2 md:px-2 md:py-2 rounded-md bg-color-five text-white mb-4",children:"Save Changes"})})]})]})})]})};export{Le as default};
