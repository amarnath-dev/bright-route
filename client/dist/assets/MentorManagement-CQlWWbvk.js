import{r as m,j as e,e as t,F as h,d as k,u as v,B as u}from"./index-BH-Ykf6z.js";import{A as w}from"./index-CwJORwgX.js";import{M as f}from"./Toast-8TpPbULq.js";import"./index-BVfO-N0a.js";import"./sweetalert2.all-D9aI5KS5.js";const M=({openModal:i,setOpenModal:p,userReport:r})=>{const[g,x]=m.useState(Array((r==null?void 0:r.length)||0).fill(!1)),y=c=>{x(l=>{const b=[...l];return b[c]=!b[c],b})};return e(h,{children:t(f,{show:i,onClose:()=>p(!1),children:[e(f.Header,{className:"bg-gray-800",children:e("h1",{className:"text-white font-bold",children:"User Reports"})}),e(f.Body,{className:"ring-1 bg-background rounded-b-md px-2 py-2",children:(r==null?void 0:r.length)===0?e(h,{children:e("h1",{className:"text-white",children:"No Reports for this User"})}):e(h,{children:e("div",{className:"w-full",children:r==null?void 0:r.map((c,l)=>t("div",{id:`accordion-collapse-${l}`,"data-accordion":"collapse",children:[e("h2",{id:`accordion-collapse-heading-${l}`,children:t("button",{type:"button",className:"flex items-center justify-between w-full p-5 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-600 rounded-t-xl dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 gap-3","data-accordion-target":`#accordion-collapse-body-${l}`,"aria-expanded":g[l],"aria-controls":`accordion-collapse-body-${l}`,onClick:()=>y(l),children:[e("span",{className:"text-text text-lg",children:c==null?void 0:c.issue_faced}),e("svg",{"data-accordion-icon":!0,className:`w-3 h-3 rotate-180 shrink-0 ${g[l]?"rotate-180":""}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),e("div",{id:`accordion-collapse-body-${l}`,className:g[l]?"block":"hidden","aria-labelledby":`accordion-collapse-heading-${l}`,children:t("div",{className:"p-5 border border-b-0 border-gray-600 dark:border-gray-700 dark:bg-gray-900",children:[e("p",{className:"mb-2 text-text dark:text-gray-400",children:c==null?void 0:c.issue_desc}),t("small",{className:"text-gray-400",children:["Date: ",c==null?void 0:c.report_date]})]})})]},l))})})})]})})},D=()=>{const[i,p]=m.useState([]),[r,g]=m.useState(),[x,y]=m.useState(!1),c=k(),l=v();m.useEffect(()=>{(async()=>{var n;try{const s=await c.get("/admin/mentor",{withCredentials:!0});s.data&&(console.log("Mentor Details",s.data.mentors),p((n=s.data)==null?void 0:n.mentors))}catch(s){console.log(s)}})()},[c]);const b=async(a,n)=>{try{if(n==="block"){const s=await c.patch(`/admin/block/${a}`,{},{withCredentials:!0});if(s.data.status==="success"){const o=i.map(d=>(d==null?void 0:d._id)===a?{...d,is_blocked:!0}:d);p(o),u.success(s.data.message)}}else{const s=await c.patch(`/admin/unblock/${a}`,{},{withCredentials:!0});if(s.data.status==="success"){const o=i.map(d=>(d==null?void 0:d._id)===a?{...d,is_blocked:!1}:d);p(o),u.success(s.data.message)}}}catch(s){console.log(s)}},N=a=>{var s;const n=i.find(o=>o._id===a);g((s=n==null?void 0:n.mentorReports[0])==null?void 0:s.ReportDetails),y(!0)};return t(h,{children:[e(M,{openModal:x,setOpenModal:y,userReport:r}),t("div",{className:"grid grid-cols-12 h-screen bg-background-two",children:[e("div",{className:"hidden md:block col-span-3",children:e(w,{})}),t("div",{className:"col-span-12 md:col-span-9 h-screen px-2 py-2",children:[e("div",{className:"mt-4",children:e("div",{children:t("h1",{className:"font-bold text-gray-400",children:[e("span",{onClick:()=>l("/admin/dashboard"),className:"cursor-pointer",children:"Dashboard"})," ","/ ",e("small",{children:"Mentor Management"})]})})}),(i==null?void 0:i.length)>0?t(h,{children:[e("div",{className:"relative overflow-x-auto py-10",children:t("table",{className:"w-full text-sm text-left rtl:text-right rounded",children:[e("thead",{className:"text-xs border border-gray-800 rounded-md",children:t("tr",{className:"text-gray-400",children:[e("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e("th",{scope:"col",className:"px-6 py-3",children:"Email"}),e("th",{scope:"col",className:"px-6 py-3",children:"Reports"}),e("th",{scope:"col",className:"px-6 py-3",children:"View"}),e("th",{scope:"col",className:"px-6 py-3",children:"Block/Unblock"})]})}),i==null?void 0:i.map((a,n)=>{var s,o,d;return e(h,{children:e("tbody",{children:t("tr",{className:"bg-gray-800 border-b text-gray-400",children:[t("th",{scope:"row",className:"px-6 py-4 font-medium",children:[(s=a.profileDetails)==null?void 0:s.first_name," ",(o=a.profileDetails)==null?void 0:o.last_name]}),e("td",{className:"px-6 py-4",children:a==null?void 0:a.email}),e("td",{className:"px-6 py-4",children:(d=a==null?void 0:a.mentorReports[0])==null?void 0:d.ReportDetails.length}),e("td",{className:"px-6 py-4",children:e("button",{className:"border border-gray-600 bg-gray-700 py-1 px-6 rounded",onClick:()=>N(a==null?void 0:a._id),children:"View"})}),e("td",{className:"px-6 py-4",children:a!=null&&a.is_blocked?e("button",{className:"py-1 px-5 rounded bg-color-five text-black",onClick:()=>b(a==null?void 0:a._id,"unblock"),children:"Unblock"}):e("button",{className:"py-1 px-5 rounded bg-red-600 hover:bg-red-500 text-black",onClick:()=>b(a==null?void 0:a._id,"block"),children:"Block"})})]})},n)})})]})}),e("div",{className:"flex w-full flex-col items-end",children:t("div",{className:"inline-flex mt-2 xs:mt-0",children:[e("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-color-one rounded text-white",children:"Prev"}),e("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-gray-200 hover:bg-gray-300 border-0 border-s rounded-e",children:"Next"})]})})]}):e(h,{children:e("div",{children:e("h1",{className:"text-3xl text-gray-400 py-5",children:"Not Mentees are Available"})})})]})]})]})};export{D as default};
