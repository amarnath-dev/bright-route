import{r as g,j as s,d as f,u,B as j}from"./index-g0sAwdL0.js";import{A as N}from"./AdminSidebar-h-3bGqoD.js";import{M as p}from"./Toast-nbcniTx-.js";import"./index-cJD9i2rj.js";import"./sweetalert2.all-he3Uarcc.js";const k=({openModal:d,setOpenModal:x,userReport:r})=>{const[h,b]=g.useState(Array((r==null?void 0:r.length)||0).fill(!1)),m=c=>{b(l=>{const o=[...l];return o[c]=!o[c],o})};return s.jsx(s.Fragment,{children:s.jsxs(p,{show:d,onClose:()=>x(!1),children:[s.jsx(p.Header,{className:"bg-gray-800",children:s.jsx("h1",{className:"text-white font-bold",children:"User Reports"})}),s.jsx(p.Body,{className:"ring-1 bg-background rounded-b-md px-2 py-2",children:(r==null?void 0:r.length)===0?s.jsx(s.Fragment,{children:s.jsx("h1",{className:"text-white",children:"No Reports for this User"})}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"w-full",children:r==null?void 0:r.map((c,l)=>s.jsxs("div",{id:`accordion-collapse-${l}`,"data-accordion":"collapse",children:[s.jsx("h2",{id:`accordion-collapse-heading-${l}`,children:s.jsxs("button",{type:"button",className:"flex items-center justify-between w-full p-5 font-medium rtl:text-right text-gray-500 border border-b-0 border-gray-600 rounded-t-xl dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-800 gap-3","data-accordion-target":`#accordion-collapse-body-${l}`,"aria-expanded":h[l],"aria-controls":`accordion-collapse-body-${l}`,onClick:()=>m(l),children:[s.jsx("span",{className:"text-text text-lg",children:c==null?void 0:c.issue_faced}),s.jsx("svg",{"data-accordion-icon":!0,className:`w-3 h-3 rotate-180 shrink-0 ${h[l]?"rotate-180":""}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),s.jsx("div",{id:`accordion-collapse-body-${l}`,className:h[l]?"block":"hidden","aria-labelledby":`accordion-collapse-heading-${l}`,children:s.jsxs("div",{className:"p-5 border border-b-0 border-gray-600 dark:border-gray-700 dark:bg-gray-900",children:[s.jsx("p",{className:"mb-2 text-text dark:text-gray-400",children:c==null?void 0:c.issue_desc}),s.jsxs("small",{className:"text-gray-400",children:["Date: ",c==null?void 0:c.report_date]})]})})]},l))})})})]})})},S=()=>{const[d,x]=g.useState([]),[r,h]=g.useState(),[b,m]=g.useState(!1),c=f(),l=u();g.useEffect(()=>{(async()=>{var i;try{const a=await c.get("/admin/mentor",{withCredentials:!0});a.data&&(console.log("Mentor Details",a.data.mentors),x((i=a.data)==null?void 0:i.mentors))}catch(a){console.log(a)}})()},[c]);const o=async(e,i)=>{try{if(i==="block"){const a=await c.patch(`/admin/block/${e}`,{},{withCredentials:!0});if(a.data.status==="success"){const n=d.map(t=>(t==null?void 0:t._id)===e?{...t,is_blocked:!0}:t);x(n),j.success(a.data.message)}}else{const a=await c.patch(`/admin/unblock/${e}`,{},{withCredentials:!0});if(a.data.status==="success"){const n=d.map(t=>(t==null?void 0:t._id)===e?{...t,is_blocked:!1}:t);x(n),j.success(a.data.message)}}}catch(a){console.log(a)}},y=e=>{var a;const i=d.find(n=>n._id===e);h((a=i==null?void 0:i.mentorReports[0])==null?void 0:a.ReportDetails),m(!0)};return s.jsxs(s.Fragment,{children:[s.jsx(k,{openModal:b,setOpenModal:m,userReport:r}),s.jsxs("div",{className:"grid grid-cols-12 h-screen bg-background-two",children:[s.jsx("div",{className:"hidden md:block col-span-3",children:s.jsx(N,{})}),s.jsxs("div",{className:"col-span-12 md:col-span-9 h-screen px-2 py-2",children:[s.jsx("div",{className:"mt-4",children:s.jsx("div",{children:s.jsxs("h1",{className:"font-bold text-gray-400",children:[s.jsx("span",{onClick:()=>l("/admin/dashboard"),className:"cursor-pointer",children:"Dashboard"})," ","/ ",s.jsx("small",{children:"Mentor Management"})]})})}),s.jsx("div",{className:"mt-5 mb-2 w-full",children:s.jsx("div",{children:s.jsx("input",{type:"text",id:"simple-search",className:"border-gray-500 text-sm rounded block ps-5 p-2.5 bg-gray-800 text-gray-400",placeholder:"Search Users..."})})}),(d==null?void 0:d.length)>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left rtl:text-right rounded",children:[s.jsx("thead",{className:"text-xs border border-gray-800 rounded-md",children:s.jsxs("tr",{className:"text-gray-400",children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Reports"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"View"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Block/Unblock"})]})}),d==null?void 0:d.map((e,i)=>{var a,n,t;return s.jsx(s.Fragment,{children:s.jsx("tbody",{children:s.jsxs("tr",{className:"bg-gray-800 border-b text-gray-400",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium",children:[(a=e.profileDetails)==null?void 0:a.first_name," ",(n=e.profileDetails)==null?void 0:n.last_name]}),s.jsx("td",{className:"px-6 py-4",children:e==null?void 0:e.email}),s.jsx("td",{className:"px-6 py-4",children:(t=e==null?void 0:e.mentorReports[0])==null?void 0:t.ReportDetails.length}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{className:"border border-gray-600 bg-gray-700 py-1 px-6 rounded",onClick:()=>y(e==null?void 0:e._id),children:"View"})}),s.jsx("td",{className:"px-6 py-4",children:e!=null&&e.is_blocked?s.jsx("button",{className:"py-1 px-5 rounded bg-color-five text-black",onClick:()=>o(e==null?void 0:e._id,"unblock"),children:"Unblock"}):s.jsx("button",{className:"py-1 px-5 rounded bg-red-600 hover:bg-red-500 text-black",onClick:()=>o(e==null?void 0:e._id,"block"),children:"Block"})})]})},i)})})]})}),s.jsx("div",{className:"flex w-full flex-col items-end",children:s.jsxs("div",{className:"inline-flex mt-2 xs:mt-0",children:[s.jsx("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-color-one rounded text-white",children:"Prev"}),s.jsx("button",{className:"flex items-center justify-center px-3 h-8 text-sm font-medium bg-gray-200 hover:bg-gray-300 border-0 border-s rounded-e",children:"Next"})]})})]}):s.jsx(s.Fragment,{children:s.jsx("div",{children:s.jsx("h1",{className:"text-3xl text-gray-400 py-5",children:"Not Mentees are Available"})})})]})]})]})};export{S as default};
