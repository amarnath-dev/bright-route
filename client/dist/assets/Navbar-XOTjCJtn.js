import{r as o,a as v,d as N,j as e,B as A,S as B,u as F,t as H,e as S,s as E,g as L}from"./index-3TceeTOD.js";import{N as j,D as h,A as R}from"./Toast-Zzs0v0Ml.js";import{G as p,F as _}from"./index-fdt_ya2m.js";import{f as T}from"./index-vkJcP6vC.js";/* empty css                     */function O(r){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M408 64H104a56.16 56.16 0 0 0-56 56v192a56.16 56.16 0 0 0 56 56h40v80l93.72-78.14a8 8 0 0 1 5.13-1.86H408a56.16 56.16 0 0 0 56-56V120a56.16 56.16 0 0 0-56-56z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"216",r:"32"},child:[]}]})(r)}function V(r){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 0 1-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 0 1-.81.65c-56.38 23.21-83.78 67.74-83.78 136.14 0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 0 0-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H410.5c14.94 0 28-8.06 34.19-21a35.17 35.17 0 0 0-4.61-37.66zM256 480a80.06 80.06 0 0 0 70.44-42.13 4 4 0 0 0-3.54-5.87H189.12a4 4 0 0 0-3.55 5.87A80.06 80.06 0 0 0 256 480z"},child:[]}]})(r)}function $(r){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(r)}function G(r){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(r)}const U=({setOpen:r,notData:t})=>{const[a,f]=o.useState([]),{user:i}=v(s=>s.userAuth),g=N(),c=()=>{r(!1)};o.useEffect(()=>{(async()=>{try{const n=await g.get(`/notification/getNotifications/${i==null?void 0:i._id}`,{withCredentials:!0});f(n.data.notifications)}catch(n){console.log(n)}})()},[t,i==null?void 0:i._id,g]);const x=async s=>{try{if((await g.delete(`/notification/delete/${s}`,{withCredentials:!0})).data.status==="success"){const u=a==null?void 0:a.map(m=>(m==null?void 0:m._id)===s?{...m,isDeleted:!0}:m);f(u),A.success("Notification Deleted")}}catch(n){console.log(n)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-96 h-screen shadow-lg rounded-lg bg-gray-800 overflow-y-scroll px-5 py-2",children:[e.jsxs("div",{className:"text-start font-bold text-white flex justify-between",children:[e.jsx("h1",{className:"py-2 px-2 text-xl text-white",children:"Alerts"}),e.jsx("span",{className:"px-1 py-2",children:e.jsx($,{className:"text-3xl cursor-pointer rounded-full hover:bg-gray-200",onClick:c})})]}),e.jsx("div",{className:"flex justify-start items-start flex-col mx-1 my-1",children:(a==null?void 0:a.length)>0?e.jsx("div",{className:"flex-wrap rounded-lg w-full",children:a==null?void 0:a.map((s,n)=>e.jsx("div",{className:"px-2 py-1 w-full cursor-pointer rounded-md",children:s!=null&&s.isDeleted?"":e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("span",{className:"flex justify-end",children:e.jsx(G,{className:"text-xl text-white rounded-full",onClick:()=>x(s==null?void 0:s._id)})}),e.jsx("p",{className:"text-white rounded-md px-2",children:s==null?void 0:s.content},n),e.jsx("small",{className:"text-gray-300 px-2",children:T(s==null?void 0:s.createdAt)})]})})},n))}):e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("h1",{className:"px-4 py-4 text-xl text-gray-400",children:"No Notifications"})})})})]})})};function W(r){return p({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"},child:[]}]})(r)}const q="/assets/BRLogo-T1lppu6R.png",Z=()=>{const r=o.useContext(B),{user:t}=v(d=>d.userAuth),[a,f]=o.useState(),[i,g]=o.useState(),c=F(),x=N(),[s,n]=o.useState(!1),[u,m]=o.useState(null);o.useEffect(()=>{var d;(d=r==null?void 0:r.current)==null||d.on("getNotification",l=>{m({senderId:l==null?void 0:l.senderId,content:l==null?void 0:l.content,type:l==null?void 0:l.type,createdAt:Date.now()})})},[r]);const y=()=>{(t==null?void 0:t.role)==="mentee"&&c("/managment"),(t==null?void 0:t.role)==="mentor"&&c("/mentor/profile")},w=async()=>{(await x.delete("/logout",{withCredentials:!0})).data.status==="success"&&(H.remove("accessToken"),c("/signin"))};o.useEffect(()=>{(async()=>{try{const l=await x.get(`/getimage/${t==null?void 0:t.role}`,{withCredentials:!0});l.data&&f(l.data.profileImageId)}catch(l){console.error("Error fetching profile image ID:",l)}})()},[x,t==null?void 0:t.role]),o.useEffect(()=>{a&&(async()=>{try{const D=S(E,a),P=await L(D);g(P)}catch(l){console.error(l)}})()},[a,x]);const C=()=>{(t==null?void 0:t.role)==="mentor"&&c("/mentor/my-mentees")},I=()=>{(t==null?void 0:t.role)==="mentor"&&c("/mentor/chat"),(t==null?void 0:t.role)==="mentee"&&c("/my-mentors")},k=()=>{(t==null?void 0:t.role)==="mentor"&&c("/mentor/plans")},b=()=>{(t==null?void 0:t.role)==="mentor"&&c("/mentor/managment/password")},M=()=>{n(d=>!d)},z=()=>{(t==null?void 0:t.role)==="mentee"?c("/"):(t==null?void 0:t.role)==="mentor"?c("/mentor/home"):c("/admin/dashboard")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 w-full items-center sticky shadow-lg z-10",children:[e.jsx("div",{className:"col-span-4 bg-gray-800 h-16 flex items-center",children:e.jsx("img",{src:q,className:"w-16 md:py-6 ml-10 cursor-pointer px-2 md:px-0",alt:"logo",onClick:z})}),e.jsx("div",{className:"col-span-8 bg-gray-800 h-16",children:e.jsx("div",{className:"flex justify-end items-center text-gray-400",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex gap-7 items-center",children:[e.jsx("div",{onClick:C,className:s?"hidden":"block",children:(t==null?void 0:t.role)==="mentor"?e.jsx(W,{className:"text-3xl text-gray-400 hover:text-blue-600 cursor-pointer"}):""}),e.jsx("div",{onClick:I,className:s?"hidden":"block",children:(t==null?void 0:t.role)==="mentor"?e.jsx(O,{className:"text-3xl hover:text-blue-600 cursor-pointer text-gray-400"}):e.jsx(e.Fragment,{children:e.jsx(_,{className:"text-3xl hover:text-blue-600 text-gray-400"})})}),e.jsx("div",{className:s?"hidden":"block",children:e.jsx("span",{className:"cursor-pointer",children:e.jsx(V,{className:"text-3xl hover:text-blue-600 text-gray-400",onClick:M})})})]}),e.jsx(j,{fluid:!0,rounded:!0,className:s?"hidden":"block",children:e.jsxs("div",{className:"flex px-2",children:[e.jsxs(h,{arrowIcon:!1,inline:!0,label:e.jsx(R,{alt:"User_settings",img:i||"",rounded:!0}),children:[e.jsxs(h.Header,{children:[e.jsx("span",{className:"block text-sm",children:"Signed in as"}),e.jsx("span",{className:"block truncate text-sm font-medium",children:t==null?void 0:t.email})]}),e.jsx(h.Item,{onClick:y,children:"My Profile"}),(t==null?void 0:t.role)==="mentor"?e.jsx(h.Item,{onClick:k,children:"My Plans"}):"",(t==null?void 0:t.role)==="mentor"?e.jsx(h.Item,{onClick:b,children:"Password"}):"",e.jsx(h.Divider,{}),e.jsx(h.Item,{onClick:w,children:"Log out"})]}),e.jsx(j,{})]})}),s?e.jsx(U,{setOpen:n,notData:u||null}):""]})})})]})})};export{Z as N};
