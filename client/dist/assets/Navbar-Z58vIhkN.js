import{r as n,a as N,j as t,E as v,B as D,u as E,d as F,F as B,i as H,l as L,k as S}from"./index-LnPAAF1_.js";import{N as j,D as m,A as R}from"./Toast-Nuo7OrQp.js";import{G as f,F as _}from"./index-j2sJG9xs.js";import{f as T}from"./index-2UJqsvAx.js";import{l as O}from"./index-CUx-uIXr.js";function U(e){return f({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M408 64H104a56.16 56.16 0 0 0-56 56v192a56.16 56.16 0 0 0 56 56h40v80l93.72-78.14a8 8 0 0 1 5.13-1.86H408a56.16 56.16 0 0 0 56-56V120a56.16 56.16 0 0 0-56-56z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"216",r:"32"},child:[]}]})(e)}function V(e){return f({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 0 1-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 0 1-.81.65c-56.38 23.21-83.78 67.74-83.78 136.14 0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 0 0-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H410.5c14.94 0 28-8.06 34.19-21a35.17 35.17 0 0 0-4.61-37.66zM256 480a80.06 80.06 0 0 0 70.44-42.13 4 4 0 0 0-3.54-5.87H189.12a4 4 0 0 0-3.55 5.87A80.06 80.06 0 0 0 256 480z"},child:[]}]})(e)}function $(e){return f({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(e)}function G(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}const W=({setOpen:e,notData:d})=>{const[o,x]=n.useState([]),{user:i}=N(s=>s.userAuth),a=()=>{e(!1)};n.useEffect(()=>{(async()=>{try{const r=await v.get(`/notification/getNotifications/${i==null?void 0:i._id}`,{withCredentials:!0});console.log("Notification",r.data.notifications),x(r.data.notifications)}catch(r){console.log(r)}})()},[d,i==null?void 0:i._id]);const g=async s=>{try{if((await v.delete(`/notification/delete/${s}`,{withCredentials:!0})).data.status==="success"){const p=o==null?void 0:o.map(h=>(h==null?void 0:h._id)===s?{...h,isDeleted:!0}:h);x(p),D.success("Notification Deleted")}}catch(r){console.log(r)}};return n.useEffect(()=>{d&&console.log("not Data",d)},[d]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-96 h-screen shadow-lg rounded-lg bg-slate-200 overflow-y-scroll px-5 py-2",children:[t.jsxs("div",{className:"text-start font-bold text-gray-700 flex justify-between",children:[t.jsx("h1",{className:"py-2 px-2 text-xl",children:"Alerts"}),t.jsx("span",{className:"px-1 py-2",children:t.jsx($,{className:"text-3xl cursor-pointer rounded-full hover:bg-gray-400",onClick:a})})]}),t.jsx("div",{className:"flex justify-start items-start flex-col mx-1 my-1",children:(o==null?void 0:o.length)>0?t.jsx("div",{className:"flex-wrap rounded-lg w-full",children:o==null?void 0:o.map((s,r)=>t.jsx("div",{className:"px-2 py-1 w-full hover:bg-slate-300 cursor-pointer rounded-md",children:s!=null&&s.isDeleted?"":t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("span",{className:"flex justify-end",children:t.jsx(G,{className:"text-xl text-gray-700 hover:bg-gray-800 hover:text-white rounded-full",onClick:()=>g(s==null?void 0:s._id)})}),t.jsx("p",{className:"text-black rounded-md px-2",children:s==null?void 0:s.content},r),t.jsx("small",{className:"text-black px-2",children:T(s==null?void 0:s.createdAt)})]})})},r))}):t.jsx(t.Fragment,{children:t.jsx("div",{children:t.jsx("h1",{className:"text-black px-4 py-4 text-xl",children:"No Notifications"})})})})]})})};function q(e){return f({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"},child:[]}]})(e)}const J="/assets/BRLogo-T1lppu6R.png",ee=()=>{const{user:e}=N(c=>c.userAuth),[d,o]=n.useState(),[x,i]=n.useState(),a=E(),g=F(),[s,r]=n.useState(!1),[p,h]=n.useState(null),u=n.useRef(null);n.useEffect(()=>{var c;u.current=O("ws://localhost:3000"),(c=u.current)==null||c.on("getNotification",l=>{h({senderId:l==null?void 0:l.senderId,content:l==null?void 0:l.content,type:l==null?void 0:l.type,createdAt:Date.now()})})},[]),n.useEffect(()=>{var c;(c=u.current)==null||c.emit("addUser",e==null?void 0:e._id)},[e]);const y=()=>{(e==null?void 0:e.role)==="mentee"&&a("/managment"),(e==null?void 0:e.role)==="mentor"&&a("/mentor/profile")},w=async()=>{(await g.delete("/logout",{withCredentials:!0})).data.status==="success"&&(B.remove("accessToken"),a("/signin"))};n.useEffect(()=>{(async()=>{try{const l=await g.get(`/getimage/${e==null?void 0:e.role}`,{withCredentials:!0});l.data&&o(l.data.profileImageId)}catch(l){console.error("Error fetching profile image ID:",l)}})()},[g,e==null?void 0:e.role]),d&&(async()=>{try{const P=H(L,d),A=await S(P);i(A)}catch(l){console.error(l)}})();const k=()=>{(e==null?void 0:e.role)==="mentor"&&a("/mentor/my-mentees")},I=()=>{(e==null?void 0:e.role)==="mentor"&&a("/mentor/chat"),(e==null?void 0:e.role)==="mentee"&&a("/my-mentors")},b=()=>{(e==null?void 0:e.role)==="mentor"&&a("/mentor/plans")},C=()=>{(e==null?void 0:e.role)==="mentor"&&a("/mentor/managment/password")},M=()=>{r(c=>!c)},z=()=>{(e==null?void 0:e.role)==="mentee"?a("/"):(e==null?void 0:e.role)==="mentor"?a("/mentor/home"):a("/admin/dashboard")};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-12 w-full items-center sticky shadow-lg z-10",children:[t.jsx("div",{className:"col-span-4 bg-gray-800 h-16 flex items-center",children:t.jsx("img",{src:J,className:"bg-transparent w-16 py-6 ml-10 text-white font-white cursor-pointer",alt:"logo",onClick:z})}),t.jsx("div",{className:"col-span-8 bg-gray-800 h-16",children:t.jsx("div",{className:"flex justify-end items-center text-gray-400",children:t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex gap-7 items-center",children:[t.jsx("div",{onClick:k,className:s?"hidden":"block",children:(e==null?void 0:e.role)==="mentor"?t.jsx(q,{className:"text-3xl text-gray-400 hover:text-blue-600 cursor-pointer"}):""}),t.jsx("div",{onClick:I,className:s?"hidden":"block",children:(e==null?void 0:e.role)==="mentor"?t.jsx(U,{className:"text-3xl hover:text-blue-600 cursor-pointer text-gray-400"}):t.jsx(t.Fragment,{children:t.jsx(_,{className:"text-3xl hover:text-blue-600 text-gray-400"})})}),t.jsx("div",{className:s?"hidden":"block",children:t.jsx("span",{className:"cursor-pointer",children:t.jsx(V,{className:"text-3xl hover:text-blue-600 text-gray-400",onClick:M})})})]}),t.jsx(j,{fluid:!0,rounded:!0,className:s?"hidden":"block",children:t.jsxs("div",{className:"flex px-2",children:[t.jsxs(m,{arrowIcon:!1,inline:!0,label:t.jsx(R,{alt:"User_settings",img:x||"",rounded:!0}),children:[t.jsxs(m.Header,{children:[t.jsx("span",{className:"block text-sm",children:"Signed in as"}),t.jsx("span",{className:"block truncate text-sm font-medium",children:e==null?void 0:e.email})]}),t.jsx(m.Item,{onClick:y,children:"My Profile"}),(e==null?void 0:e.role)==="mentor"?t.jsx(m.Item,{onClick:b,children:"My Plans"}):"",(e==null?void 0:e.role)==="mentor"?t.jsx(m.Item,{onClick:C,children:"Password"}):"",t.jsx(m.Divider,{}),t.jsx(m.Item,{onClick:w,children:"Log out"})]}),t.jsx(j,{})]})}),s?t.jsx(W,{setOpen:r,notData:p||null}):""]})})})]})})};export{ee as default};
