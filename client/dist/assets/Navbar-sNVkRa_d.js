import{r as c,a as N,d as v,j as t,B as P,S as A,u as B,t as S,e as E,s as L,g as R}from"./index-OOUbbyCE.js";import{N as j,D as x,A as _}from"./Toast-_tPr2boB.js";import{G as p,F as T,a as O}from"./index-ry2Amagv.js";import{f as V}from"./index-5l9d6-G0.js";/* empty css                     */function $(l){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M408 64H104a56.16 56.16 0 0 0-56 56v192a56.16 56.16 0 0 0 56 56h40v80l93.72-78.14a8 8 0 0 1 5.13-1.86H408a56.16 56.16 0 0 0 56-56V120a56.16 56.16 0 0 0-56-56z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"216",r:"32"},child:[]}]})(l)}function G(l){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 0 1-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 0 1-.81.65c-56.38 23.21-83.78 67.74-83.78 136.14 0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 0 0-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H410.5c14.94 0 28-8.06 34.19-21a35.17 35.17 0 0 0-4.61-37.66zM256 480a80.06 80.06 0 0 0 70.44-42.13 4 4 0 0 0-3.54-5.87H189.12a4 4 0 0 0-3.55 5.87A80.06 80.06 0 0 0 256 480z"},child:[]}]})(l)}function U(l){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(l)}function W(l){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(l)}const q=({setOpen:l,notData:e})=>{const[n,f]=c.useState([]),{user:i}=N(s=>s.userAuth),g=v(),r=()=>{l(!1)};c.useEffect(()=>{(async()=>{var s;try{const o=await g.get(`/notification/getNotifications/${i==null?void 0:i._id}`,{withCredentials:!0});f((s=o.data)==null?void 0:s.notifications)}catch(o){console.log(o)}})()},[e,i==null?void 0:i._id,g]);const h=async s=>{try{if((await g.delete(`/notification/delete/${s}`,{withCredentials:!0})).data.status==="success"){const u=n==null?void 0:n.map(m=>(m==null?void 0:m._id)===s?{...m,isDeleted:!0}:m);f(u),P.success("Notification Deleted")}}catch(o){console.log(o)}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-96 h-screen shadow-lg rounded-lg bg-gray-800 overflow-y-scroll px-5 py-2",children:[t.jsxs("div",{className:"text-start font-bold text-white flex justify-between",children:[t.jsx("h1",{className:"py-2 px-2 text-xl text-white",children:"Alerts"}),t.jsx("span",{className:"px-1 py-2",children:t.jsx(U,{className:"text-3xl cursor-pointer rounded-full hover:bg-gray-200",onClick:r})})]}),t.jsx("div",{className:"flex justify-start items-start flex-col mx-1 my-1",children:(n==null?void 0:n.length)>0?t.jsx("div",{className:"flex-wrap rounded-lg w-full",children:n==null?void 0:n.map((s,o)=>t.jsx("div",{className:"px-2 py-1 w-full cursor-pointer rounded-md",children:s!=null&&s.isDeleted?"":t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("span",{className:"flex justify-end",children:t.jsx(W,{className:"text-xl text-white rounded-full",onClick:()=>h(s==null?void 0:s._id)})}),t.jsx("p",{className:"text-white rounded-md px-2",children:s==null?void 0:s.content},o),t.jsx("small",{className:"text-gray-300 px-2",children:V(s==null?void 0:s.createdAt)})]})})},o))}):t.jsx(t.Fragment,{children:t.jsx("div",{children:t.jsx("h1",{className:"px-4 py-4 text-xl text-gray-400",children:"No Notifications"})})})})]})})};function J(l){return p({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"},child:[]}]})(l)}const K="/assets/BRLogo-T1lppu6R.png",Q="/assets/no-profile-image-rF-zpbrI.png",se=()=>{const l=c.useContext(A),{user:e}=N(d=>d.userAuth),[n,f]=c.useState(),[i,g]=c.useState(),r=B(),h=v(),[s,o]=c.useState(!1),[u,m]=c.useState(null);c.useEffect(()=>{var d;(d=l==null?void 0:l.current)==null||d.on("getNotification",a=>{m({senderId:a==null?void 0:a.senderId,content:a==null?void 0:a.content,type:a==null?void 0:a.type,createdAt:Date.now()})})},[l]);const y=()=>{(e==null?void 0:e.role)==="mentee"&&r("/managment"),(e==null?void 0:e.role)==="mentor"&&r("/mentor/profile")},w=async()=>{(await h.delete("/logout",{withCredentials:!0})).data.status==="success"&&(S.remove("accessToken"),r("/signin"))};c.useEffect(()=>{(async()=>{try{const a=await h.get(`/getimage/${e==null?void 0:e.role}`,{withCredentials:!0});a.data&&f(a.data.profileImageId)}catch(a){console.error("Error fetching profile image ID:",a)}})()},[h,e==null?void 0:e.role]),c.useEffect(()=>{n&&(async()=>{try{const F=E(L,n),H=await R(F);g(H)}catch(a){console.error(a)}})()},[n,h]);const I=()=>{(e==null?void 0:e.role)==="mentor"&&r("/mentor/my-mentees")},k=()=>{(e==null?void 0:e.role)==="mentor"&&r("/mentor/chat"),(e==null?void 0:e.role)==="mentee"&&r("/my-mentors")},C=()=>{(e==null?void 0:e.role)==="mentor"&&r("/mentor/plans")},b=()=>{(e==null?void 0:e.role)==="mentor"&&r("/mentor/managment/password")},z=()=>{o(d=>!d)},M=()=>{(e==null?void 0:e.role)==="mentee"?r("/"):(e==null?void 0:e.role)==="mentor"?r("/mentor/home"):r("/admin/dashboard")},D=()=>{(e==null?void 0:e.role)==="mentor"&&r("/mentor/history"),(e==null?void 0:e.role)==="mentee"&&r("/history")};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-12 w-full items-center sticky shadow-lg z-10",children:[t.jsx("div",{className:"col-span-4 bg-gray-800 h-16 flex items-center",children:t.jsx("img",{src:K,className:"w-16 md:py-6 md:ml-10 cursor-pointer px-2 md:px-0",alt:"logo",onClick:M})}),t.jsx("div",{className:"col-span-8 bg-gray-800 h-16",children:t.jsx("div",{className:"flex justify-end items-center text-gray-400",children:t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex gap-4 md:gap-7 items-center",children:[t.jsx("div",{onClick:D,className:s?"hidden":"block",children:t.jsx(T,{className:"text-2xl hover:text-blue-600 text-gray-400"})}),t.jsx("div",{onClick:I,className:s?"hidden":"block",children:(e==null?void 0:e.role)==="mentor"?t.jsx(J,{className:"text-3xl text-gray-400 hover:text-blue-600 cursor-pointer"}):""}),t.jsx("div",{onClick:k,className:s?"hidden":"block",children:(e==null?void 0:e.role)==="mentor"?t.jsx($,{className:"text-3xl hover:text-blue-600 cursor-pointer text-gray-400"}):t.jsx(t.Fragment,{children:t.jsx(O,{className:"text-3xl hover:text-blue-600 text-gray-400"})})}),t.jsx("div",{className:s?"hidden":"block",children:t.jsx("span",{className:"cursor-pointer",children:t.jsx(G,{className:"text-3xl hover:text-blue-600 text-gray-400",onClick:z})})})]}),t.jsx(j,{fluid:!0,rounded:!0,className:s?"hidden":"block",children:t.jsxs("div",{className:"flex",children:[t.jsxs(x,{arrowIcon:!1,inline:!0,label:t.jsx(_,{alt:"User_settings",img:i||Q,rounded:!0}),children:[t.jsxs(x.Header,{children:[t.jsx("span",{className:"block text-sm",children:"Signed in as"}),t.jsx("span",{className:"block truncate text-sm font-medium",children:e==null?void 0:e.email})]}),t.jsx(x.Item,{onClick:y,children:"My Profile"}),(e==null?void 0:e.role)==="mentor"?t.jsx(x.Item,{onClick:C,children:"My Plans"}):"",(e==null?void 0:e.role)==="mentor"?t.jsx(x.Item,{onClick:b,children:"Password"}):"",t.jsx(x.Divider,{}),t.jsx(x.Item,{onClick:w,children:"Log out"})]}),t.jsx(j,{})]})}),s?t.jsx(q,{setOpen:o,notData:u||null}):""]})})})]})})};export{se as N,Q as a};
