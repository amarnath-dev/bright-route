import{d as j,u as _,r as d,e as a,j as e,Q as D,F as l,B as o}from"./index-KMt4GyZR.js";const F=()=>{const c=j(),y=_(),[i,w]=d.useState(""),[b,f]=d.useState(!1),[N,u]=d.useState(!1),[m,v]=d.useState(!1),[P,E]=d.useState(!1),[t,k]=d.useState({password:"",re_entered_pass:""}),[T,p]=d.useState(!1),O=async r=>{r.preventDefault();try{const n=new FormData(r.currentTarget).get("emailInput");if(w(n),(await c.post("/password/checkEmail",{emailId:n},{withCredentials:!0})).data.status==="failed"){f(!0);return}v(!0),o.success("Email sent successfully")}catch(s){console.log(s)}},C=async r=>{var s;r.preventDefault();try{const h=new FormData(r.currentTarget).get("OTPinput");console.log("OTP Nm",h),((s=(await c.post("/password/OTPVerify",{userEmail:i,OTPNum:h},{withCredentials:!0})).data)==null?void 0:s.status)==="success"?E(!0):u(!0)}catch{o.error("Resend OTP and Try Again")}},g=r=>{const{name:s,value:n}=r.target;k({...t,[s]:n}),u(!1),p(!1)},S=async()=>{var r;if(t.password&&t.password!==t.re_entered_pass&&t.re_entered_pass){p(!0);return}try{const s=await c.post("/password/new-password",{userEmail:i,formData:t},{withCredentials:!0});s.data.status==="success"?(o.success((r=s.data)==null?void 0:r.message),y("/signin")):o.error(s.data.message)}catch(s){console.log(s)}},x=()=>{u(!1),p(!1),f(!1)};return a(l,{children:[e(D,{className:"w-40 md:w-80"}),e("div",{className:"w-full h-screen flex justify-center items-center bg-background-two",children:P===!1?e(l,{children:e("div",{className:"border border-gray-400 px-4 py-4 rounded-md",children:a("form",{onSubmit:m?C:O,children:[m?a(l,{children:[a("div",{className:"flex flex-col",children:[e("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 mb-2 text-gray-300",children:"Enter the OTP send to your Email:"}),N?e(l,{children:e("h1",{className:"text-red-600 py-2",children:"Invalid OTP Please Try Again"})}):""]}),e("label",{className:"flex justify-center",children:e("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",type:"text",required:!0,name:"OTPinput",onChange:x})}),e("div",{children:e("span",{className:"text-blue-500 underline cursor-pointer mt-1",onClick:async()=>{var r;try{const s=await c.post("/password/checkEmail",{emailId:i},{withCredentials:!0});s.data.status==="success"&&o.success((r=s.data)==null?void 0:r.message)}catch(s){console.log(s)}},children:"Re send OTP"})}),e("br",{})]}):a("div",{children:[a("div",{className:"flex flex-col",children:[e("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 mb-2 text-gray-300",children:"Please provide your email Address:"}),b?e(l,{children:e("h1",{className:"text-red-600 py-2",children:"Email not found"})}):""]}),e("label",{className:"flex justify-center",children:e("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Email",type:"email",name:"emailInput",onChange:x,required:!0})}),e("br",{})]}),e("div",{className:"flex justify-center",children:e("button",{type:"submit",className:"border-1 border-slate-300 bg-color-five text-white rounded-md font-bold py-2 w-72 md:w-96 sm:text-lg",children:m?"Verify":"Get OTP"})})]})})}):e(l,{children:a("div",{className:"border border-gray-400 px-4 py-4 rounded-md",children:[e("div",{className:"flex flex-col",children:e("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 mb-2 text-gray-300",children:"Enter New Password"})}),a("div",{children:[a("label",{className:"flex justify-center flex-col",children:[T?e(l,{children:e("h1",{className:"text-red-500",children:"Password not matching"})}):"",e("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 border border-slate-300 rounded-md py-1 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",type:"text",name:"password",value:t==null?void 0:t.password,onChange:g,required:!0})]}),e("h1",{className:"text-gray-300 py-1",children:"Re-enter the Password"}),e("label",{className:"flex justify-center flex-col",children:e("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 border border-slate-300 rounded-md py-1 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",type:"text",name:"re_entered_pass",value:t==null?void 0:t.re_entered_pass,onChange:g,required:!0})})]}),e("div",{className:"flex justify-center mt-3",children:e("button",{type:"submit",className:"border-1 border-slate-300 bg-color-five text-white rounded-md font-bold py-2 w-72 md:w-96 sm:text-lg mt-2",onClick:S,children:"Change"})})]})})})]})},V=()=>e(l,{children:e(F,{})});export{V as default};
