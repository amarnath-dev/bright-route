import{r as u,d as j,w as y,u as w,a as N,j as e,L as i,F as v,B as c,M as k}from"./index-OOUbbyCE.js";import{u as S,t as F}from"./index-eBUA4iuB.js";import{l as E}from"./loginSchema--2ft7p30.js";import{G as M}from"./GoogleAuth-p6brXrOv.js";const D=()=>{const[h,m]=u.useState(!1),x=j(),f=y(),l=w(),{user:s}=N(a=>a.userAuth);u.useEffect(()=>{(async()=>{try{(await x.get("/checkToken",{withCredentials:!0})).data.status==="exists"?((s==null?void 0:s.role)==="mentee"&&l("/"),(s==null?void 0:s.role)==="mentor"&&(console.log("Navigating"),l("/mentor/home")),(s==null?void 0:s.role)==="admin"&&l("/admin/dashboard")):console.log("User not logged In")}catch(t){console.error("Error checking token:",t)}})()},[x,l,s==null?void 0:s.role]);const{register:d,handleSubmit:p,formState:{errors:r}}=S({resolver:F(E)}),g=async a=>{try{const t=await f(v(a));if(t){const o=t.payload;if(o.status==="success"){const n=o.user;n.role==="mentee"?l("/"):(n==null?void 0:n.role)==="mentor"?c.error("Canno't Find Email"):n.role==="admin"&&c.error("Canno't Find Email")}else c.error(o.message)}}catch(t){console.log(t)}},b=async a=>{try{const o=(await f(k(a))).payload;o.status==="success"?l("/mentor/home"):c.error(o.message)}catch(t){typeof t=="string"&&console.log(t)}};return e.jsx(e.Fragment,{children:h?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-screen bg-background-two",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("form",{onSubmit:p(b),className:"border border-gray-500 py-12 px-5 rounded-md",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 md:text-2xl font-bold mb-5 text-gray-300",children:"Log in as Mentor"}),e.jsx("button",{onClick:()=>m(!1),type:"button",className:"text-md px-5 py-1 md:px-0 md:py-0 md:text-xl h-8 font-bold text-color-five md:ml-12 underline",children:"I am a Mentee"})]}),e.jsx("label",{className:"flex justify-center",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none bg-gray-800 text-gray-300 focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Email",type:"email",...d("email")})}),e.jsx("div",{className:"flex flex-col",children:r.email&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.email.message]})}),e.jsx("label",{className:"flex justify-center flex-row",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 bg-gray-800 text-gray-400 rounded-md mt-4 py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Password",type:"password",...d("password")})}),e.jsx("div",{className:"flex flex-col",children:r.password&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.password.message]})}),e.jsx("br",{}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"border-1 border-slate-300 mt-2 bg-color-five text-white rounded-md font-bold py-2 w-72 md:w-96 sm:text-lg",children:"Signin"})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("h1",{className:"mt-3 text-white",children:["Don’t have an account?",e.jsx(i,{to:"/signup",className:"ml-2 text-color-five font-bold",children:"Signup"})]})})]})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-screen bg-background-two",children:e.jsx("div",{className:"flex justify-center items-center h-full py-16",children:e.jsxs("form",{onSubmit:p(g),className:"border border-gray-500 py-12 px-5 rounded-md",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 md:text-2xl font-bold mb-5 text-white",children:"Log in as Mentee"}),e.jsx("button",{type:"button",className:"text-md px-5 py-1 md:px-0 md:py-0 md:text-xl h-8 font-bold text-color-five md:ml-12 underline",onClick:()=>m(!0),children:"I am a Mentor"})]}),e.jsx("label",{className:"flex justify-center",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 bg-gray-800 text-gray-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Email",type:"email",...d("email")})}),e.jsx("div",{className:"flex flex-col",children:r.email&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.email.message]})}),e.jsx("label",{className:"flex justify-center flex-row",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 bg-gray-800 text-gray-300 rounded-md mt-4 py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Password",type:"password",...d("password")})}),e.jsx("div",{className:"flex flex-col",children:r.password&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.password.message]})}),e.jsx("br",{}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"border-1 border-slate-300 bg-color-five text-white rounded-md font-bold py-2 w-72 md:w-96 sm:text-lg",children:"Signin"})}),e.jsx("div",{className:"mt-2",children:e.jsx(i,{to:"/forgotpassword",className:"text-blue-500 underline",children:"Forgot Password ?"})}),e.jsx("div",{className:"mt-3 flex justify-center items-center",children:e.jsx(M,{})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("h1",{className:"mt-3 text-gray-300 text-lg font-bold",children:["Don’t have an account?",e.jsx(i,{to:"/signup",className:"ml-2 text-color-five font-bold underline",children:"Signup"})]})})]})})})})})},I=()=>e.jsx(e.Fragment,{children:e.jsx(D,{})});export{I as default};
