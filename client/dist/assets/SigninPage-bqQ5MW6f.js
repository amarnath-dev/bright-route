import{r as p,d as y,b as w,u as N,a as v,j as e,Q as h,L as i,f as k,B as c,M as S}from"./index-nEkFjI82.js";import{u as F,t as E}from"./index-5HutU-Fc.js";import{l as M}from"./loginSchema-T9GP0hGo.js";import{G as P}from"./GoogleAuth-3Xa0mdRZ.js";const A=()=>{const[g,m]=p.useState(!1),x=y(),u=w(),l=N(),s=v(a=>a.userAuth.user);p.useEffect(()=>{(async()=>{try{if((await x.get("/checkToken",{withCredentials:!0})).data.status==="exists"){if((s==null?void 0:s.role)==="mentee"){l("/");return}if((s==null?void 0:s.role)==="mentor"){l("/mentor/home");return}if((s==null?void 0:s.role)==="admin"){l("/admin/dashboard");return}}else console.log("User not logged In")}catch(t){console.error("Error checking token:",t)}})()},[x,l,s==null?void 0:s.role]);const{register:n,handleSubmit:f,formState:{errors:r}}=F({resolver:E(M)}),b=async a=>{try{const t=await u(k(a));if(t){const o=t.payload;if(o.status==="success"){const d=o.user;d.role==="mentee"?(console.log("Redirecting to home page"),l("/")):d.role==="mentor"?c.error("Canno't Find Email"):d.role==="admin"&&c.error("Canno't Find Email")}else c.error(o.message)}}catch(t){console.log(t)}},j=async a=>{try{const o=(await u(S(a))).payload;o.status==="success"?l("/mentor/home"):c.error(o.message)}catch(t){typeof t=="string"&&console.log(t)}};return e.jsx(e.Fragment,{children:g?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-40 md:w-80"}),e.jsx("div",{className:"w-full h-screen bg-background-two",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("form",{onSubmit:f(j),className:"border border-gray-500 py-12 px-5 rounded-md",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 md:text-2xl font-bold mb-5 text-white",children:"Log in as Mentor"}),e.jsx("button",{onClick:()=>m(!1),type:"button",className:"text-md px-5 py-1 md:px-0 md:py-0 md:text-xl h-8 font-bold text-color-five md:ml-12 underline",children:"I am a Mentee"})]}),e.jsx("label",{className:"flex justify-center",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none bg-gray-800 text-gray-400 focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Email",type:"email",...n("email")})}),e.jsx("div",{className:"flex flex-col",children:r.email&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.email.message]})}),e.jsx("label",{className:"flex justify-center flex-row",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 bg-gray-800 text-gray-400 rounded-md mt-4 py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Password",type:"password",...n("password")})}),e.jsx("div",{className:"flex flex-col",children:r.password&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.password.message]})}),e.jsx("br",{}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"border-1 border-slate-300 mt-2 bg-color-five text-white rounded-md font-bold py-2 w-72 md:w-96 sm:text-lg",children:"Signin"})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("h1",{className:"mt-3 text-white",children:["Don’t have an account?",e.jsx(i,{to:"/signup",className:"ml-2 text-color-five font-bold",children:"Signup"})]})})]})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-40 md:w-80"}),e.jsx("div",{className:"w-full h-screen bg-background-two",children:e.jsx("div",{className:"flex justify-center items-center h-full py-16",children:e.jsxs("form",{onSubmit:f(b),className:"border border-gray-500 py-12 px-5 rounded-md",children:[e.jsxs("div",{className:"flex",children:[e.jsx("h1",{className:"text-md px-4 py-1 md:py-0 md:px-0 md:text-2xl font-bold mb-5 text-gray-400",children:"Log in as Mentee"}),e.jsx("button",{type:"button",className:"text-md px-5 py-1 md:px-0 md:py-0 md:text-xl h-8 font-bold text-color-five md:ml-12 underline",onClick:()=>m(!0),children:"I am a Mentor"})]}),e.jsx("label",{className:"flex justify-center",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 bg-gray-800 text-gray-400 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Email",type:"email",...n("email")})}),e.jsx("div",{className:"flex flex-col",children:r.email&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.email.message]})}),e.jsx("label",{className:"flex justify-center flex-row",children:e.jsx("input",{className:"placeholder:text-slate-400 block border border-slate-300 bg-gray-800 text-gray-400 rounded-md mt-4 py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-lg",placeholder:"Password",type:"password",...n("password")})}),e.jsx("div",{className:"flex flex-col",children:r.password&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",r.password.message]})}),e.jsx("br",{}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"border-1 border-slate-300 bg-color-five text-white rounded-md font-bold py-2 w-72 md:w-96 sm:text-lg",children:"Signin"})}),e.jsx("div",{className:"mt-2",children:e.jsx(i,{to:"/forgotpassword",className:"text-blue-500 underline",children:"Forgot Password ?"})}),e.jsx("div",{className:"mt-3 flex justify-center items-center",children:e.jsx(P,{})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("h1",{className:"mt-3 text-gray-500",children:["Don’t have an account?",e.jsx(i,{to:"/signup",className:"ml-2 text-color-five font-bold",children:"Signup"})]})})]})})})]})})},G=()=>e.jsx(e.Fragment,{children:e.jsx(A,{})});export{G as default};
