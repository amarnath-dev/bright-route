import{r as u,j as e,q as se,w as $,u as I,R as re,y as oe,B as C,A as ae,a as z,d as ie,L as F,z as le}from"./index-3TceeTOD.js";import{z as S,u as ce,t as ue}from"./index-D0O98nyx.js";import{M as O,L as de,B as me}from"./Toast-Zzs0v0Ml.js";import{n as pe,o as T,_ as w,a as q,g as U,s as R,p as fe,u as W,e as M,f as G,c as N}from"./generateUtilityClasses-lap0UWya.js";import{e as H,u as he,a as ge}from"./useTheme-QnyazGUK.js";import{u as A,a as xe}from"./useTimeout-nvZZxNHc.js";import{P as be}from"./Paper-6NoFXftF.js";import{G as ve}from"./Grow-PMlbjmHg.js";import{G as ye}from"./GoogleAuth-5-PbQ-Ok.js";import"./TransitionGroupContext-cEyycVNY.js";function B(t){return t.substring(2).toLowerCase()}function we(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function ke(t){const{children:s,disableReactTree:l=!1,mouseEvent:i="onClick",onClickAway:h,touchEvent:b="onTouchEnd"}=t,v=u.useRef(!1),g=u.useRef(null),c=u.useRef(!1),p=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const d=pe(s.ref,g),m=A(n=>{const o=p.current;p.current=!1;const f=T(g.current);if(!c.current||!g.current||"clientX"in n&&we(n,f))return;if(v.current){v.current=!1;return}let r;n.composedPath?r=n.composedPath().indexOf(g.current)>-1:r=!f.documentElement.contains(n.target)||g.current.contains(n.target),!r&&(l||!o)&&h(n)}),y=n=>o=>{p.current=!0;const f=s.props[n];f&&f(o)},k={ref:d};return b!==!1&&(k[b]=y(b)),u.useEffect(()=>{if(b!==!1){const n=B(b),o=T(g.current),f=()=>{v.current=!0};return o.addEventListener(n,m),o.addEventListener("touchmove",f),()=>{o.removeEventListener(n,m),o.removeEventListener("touchmove",f)}}},[m,b]),i!==!1&&(k[i]=y(i)),u.useEffect(()=>{if(i!==!1){const n=B(i),o=T(g.current);return o.addEventListener(n,m),()=>{o.removeEventListener(n,m)}}},[m,i]),e.jsx(u.Fragment,{children:u.cloneElement(s,k)})}function je(t={}){const{autoHideDuration:s=null,disableWindowBlurListener:l=!1,onClose:i,open:h,resumeHideDuration:b}=t,v=xe();u.useEffect(()=>{if(!h)return;function r(a){a.defaultPrevented||(a.key==="Escape"||a.key==="Esc")&&(i==null||i(a,"escapeKeyDown"))}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[h,i]);const g=A((r,a)=>{i==null||i(r,a)}),c=A(r=>{!i||r==null||v.start(r,()=>{g(null,"timeout")})});u.useEffect(()=>(h&&c(s),v.clear),[h,s,c,v]);const p=r=>{i==null||i(r,"clickaway")},d=v.clear,m=u.useCallback(()=>{s!=null&&c(b??s*.5)},[s,b,c]),y=r=>a=>{const x=r.onBlur;x==null||x(a),m()},k=r=>a=>{const x=r.onFocus;x==null||x(a),d()},n=r=>a=>{const x=r.onMouseEnter;x==null||x(a),d()},o=r=>a=>{const x=r.onMouseLeave;x==null||x(a),m()};return u.useEffect(()=>{if(!l&&h)return window.addEventListener("focus",m),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",d)}},[l,h,m,d]),{getRootProps:(r={})=>{const a=w({},H(t),H(r));return w({role:"presentation"},r,a,{onBlur:y(a),onFocus:k(a),onMouseEnter:n(a),onMouseLeave:o(a)})},onClickAway:p}}const Ce=new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/),Ee=new RegExp(/^[a-zA-Z]+$/),Se=S.object({first_name:S.string({required_error:"First name is required",invalid_type_error:"First name must be a string"}).max(30,{message:"First name is too long"}).min(2,{message:"First Name must be at least 2 characters"}).refine(t=>t.trim()!=="",{message:"First name should not be empty"}),last_name:S.string({required_error:"Last name is required",invalid_type_error:"Last name must be a string"}).max(30).refine(t=>Ee.test(t),{message:"Name should not contain numbers"}).refine(t=>t.trim()!=="",{message:"Last name should not be empty"}),email:S.string().email(),password:S.string({required_error:"Password is required"}).min(1,{message:"Must have at least 8 character"}).max(10,{message:"Password should belove 10 characters"}).regex(Ce,{message:"Your password is not valid"})});function Ne(t){return q("MuiSnackbarContent",t)}U("MuiSnackbarContent",["root","message","action"]);const Re=["action","className","message","role"],Le=t=>{const{classes:s}=t;return G({root:["root"],action:["action"],message:["message"]},Ne,s)},Pe=R(be,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>{const s=t.palette.mode==="light"?.8:.98,l=fe(t.palette.background.default,s);return w({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(l),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:l,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Oe=R("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,s)=>s.message})({padding:"8px 0"}),Te=R("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,s)=>s.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Me=u.forwardRef(function(s,l){const i=W({props:s,name:"MuiSnackbarContent"}),{action:h,className:b,message:v,role:g="alert"}=i,c=M(i,Re),p=i,d=Le(p);return e.jsxs(Pe,w({role:g,square:!0,elevation:6,className:se(d.root,b),ownerState:p,ref:l},c,{children:[e.jsx(Oe,{className:d.message,ownerState:p,children:v}),h?e.jsx(Te,{className:d.action,ownerState:p,children:h}):null]}))}),Ae=Me;function _e(t){return q("MuiSnackbar",t)}U("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const ze=["onEnter","onExited"],Fe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],He=t=>{const{classes:s,anchorOrigin:l}=t,i={root:["root",`anchorOrigin${N(l.vertical)}${N(l.horizontal)}`]};return G(i,_e,s)},D=R("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:l}=t;return[s.root,s[`anchorOrigin${N(l.anchorOrigin.vertical)}${N(l.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:s})=>{const l={left:"50%",right:"auto",transform:"translateX(-50%)"};return w({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},s.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},s.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},s.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:w({},s.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},s.anchorOrigin.horizontal==="center"&&l,s.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},s.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Be=u.forwardRef(function(s,l){const i=W({props:s,name:"MuiSnackbar"}),h=he(),b={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{action:v,anchorOrigin:{vertical:g,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:d,className:m,ClickAwayListenerProps:y,ContentProps:k,disableWindowBlurListener:n=!1,message:o,open:f,TransitionComponent:r=ve,transitionDuration:a=b,TransitionProps:{onEnter:x,onExited:E}={}}=i,j=M(i.TransitionProps,ze),K=M(i,Fe),L=w({},i,{anchorOrigin:{vertical:g,horizontal:c},autoHideDuration:p,disableWindowBlurListener:n,TransitionComponent:r,transitionDuration:a}),Y=He(L),{getRootProps:Z,onClickAway:V}=je(w({},L)),[J,_]=u.useState(!0),Q=ge({elementType:D,getSlotProps:Z,externalForwardedProps:K,ownerState:L,additionalProps:{ref:l},className:[Y.root,m]}),ee=P=>{_(!0),E&&E(P)},te=(P,ne)=>{_(!1),x&&x(P,ne)};return!f&&J?null:e.jsx(ke,w({onClickAway:V},y,{children:e.jsx(D,w({},Q,{children:e.jsx(r,w({appear:!0,in:f,timeout:a,direction:g==="top"?"down":"up",onEnter:te,onExited:ee},j,{children:d||e.jsx(Ae,w({message:o,action:v},k))}))}))}))}),X=Be,De=({openModal:t,setOpenModal:s,serverResponse:l})=>{const i=$(),h=I(),[b,v]=re.useState(!1),g=(n,o)=>{o!=="clickaway"&&v(!1)},c=u.useRef(null),p=u.useRef(null),d=u.useRef(null),m=u.useRef(null),y=async()=>{var n;if(c.current&&p.current&&d.current&&m.current)if(c.current.value.length&&p.current.value.length&&d.current.value.length&&c.current.value.length>0)try{const o=c.current.value,f=p.current.value,r=d.current.value,a=m.current.value,x=o+f+r+a;if(l){l.otp=x;const E=await i(oe(l));if(E){const j=E.payload;j.status==404?C.error(j.message):j.status==400?C.error(j.message):((n=j==null?void 0:j.user)==null?void 0:n.role)==="mentee"&&h("/")}}else console.log("Server Response is Null"),C.error("Something went wrong")}catch(o){typeof o=="string"&&console.log(o)}else console.log("Invalid OTP"),C.error("Invalid OTP")},k=async()=>{try{(await ae.post("/resendOTP",{serverResponse:l})).data.status=="success"?v(!0):C("Please Try Again")}catch(n){console.log(n)}};return e.jsxs(O,{show:t,size:"md",onClose:()=>s(!1),popup:!0,children:[e.jsx(O.Header,{}),e.jsxs(O.Body,{children:[e.jsx(X,{open:b,autoHideDuration:5e3,onClose:g,message:"Email sent Successfully"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white ml-2",children:"Enter the OTP"}),e.jsxs("div",{className:"otp-box",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(de,{htmlFor:"email",value:"Please enter the OTP that send to youre email",className:"ml-2"})}),e.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:c,autoFocus:!0,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&c.current&&(c.current.value=n.target.value[1]),(o=p.current)==null||o.focus()}}),e.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:p,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&p.current&&(p.current.value=n.target.value[1]),(o=d.current)==null||o.focus()}}),e.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:d,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&d.current&&(d.current.value=n.target.value[1]),(o=m.current)==null||o.focus()}}),e.jsx("input",{type:"number",size:1,maxLength:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:m,onChange:n=>{n.target.value&&n.target.value.length>1&&m.current&&(m.current.value=n.target.value[1])}}),e.jsxs("div",{className:"w-full mt-3 ml-2",children:[e.jsx(me,{onClick:y,children:"Submit"}),e.jsx("button",{className:"text-blue-700 mt-4 underline",onClick:k,children:"Re-Send OTP"})]})]})]})]})},$e=()=>{const{user:t}=z(f=>f.userAuth),[s,l]=u.useState(!1),[i,h]=u.useState(!1),{isLoading:b}=z(f=>f.userAuth),v=$(),g=ie(),c=I();u.useEffect(()=>{(async()=>{try{if((await g.get("/checkToken",{withCredentials:!0})).data.status==="exists"){if((t==null?void 0:t.role)==="mentee"){c("/");return}if((t==null?void 0:t.role)==="mentor"){c("/mentor/home");return}if((t==null?void 0:t.role)==="admin"){c("/admin/dashboard");return}}else console.log("User not logged In")}catch(r){console.error("Error checking token:",r)}})()},[g,c,t==null?void 0:t.role]);const p=(f,r)=>{r!=="clickaway"&&h(!1)},[d,m]=u.useState(null),{register:y,handleSubmit:k,formState:{errors:n}}=ce({resolver:ue(Se)}),o=async f=>{var r;try{const a=await v(le(f));if(a.payload.status==="success"){if(a.payload.user){const x=a.payload.user;m(x),l(!0),h(!0)}}else C.error(a.payload.message)}catch(a){((r=a.response)==null?void 0:r.status)===409?C.error("Email Alredy Exists"):C.error("Something went wrong")}};return e.jsxs(e.Fragment,{children:[e.jsx(De,{openModal:s,setOpenModal:l,serverResponse:d}),e.jsx(X,{open:i,autoHideDuration:5e3,onClose:p,message:"Email sent Successfully"}),b?e.jsx("h1",{className:"font-bold",children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:"w-full h-screen flex justify-center items-center flex-col bg-background-two",children:[e.jsx("form",{onSubmit:k(o),className:"flex items-center justify-center",children:e.jsxs("div",{className:"mt-5 flex items-center justify-center flex-col border px-5 py-5 rounded-md",children:[e.jsx("h2",{className:"text-2xl text-center font-bold text-white py-3",children:"Sign up as Mentee"}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-white border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"First name",type:"text",...y("first_name")}),n.first_name&&e.jsxs("small",{className:"text-red-500 text-sm italic",children:["*",n.first_name.message]})]}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-white mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Last name",type:"text",...y("last_name")}),n.last_name&&e.jsxs("span",{className:"text-red-500 text-sm italic",children:["*",n.last_name.message]})]}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-white mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Email",type:"text",...y("email")}),n.email&&e.jsxs("span",{className:"text-red-500 text-sm italic",children:["*",n.email.message]})]}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-gray-400 block bg-gray-800 text-white mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Password",type:"password",...y("password")}),n.password&&e.jsxs("span",{className:"text-red-500 text-sm italic",children:["*",n.password.message]}),e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"text-white",children:"Password should have :"}),e.jsxs("div",{className:"",children:[e.jsx("li",{className:"text-white text-sm",children:"Atleast 8 characters long"}),e.jsx("li",{className:"text-white text-sm",children:"One uppercase and Lowercase letter"}),e.jsx("li",{className:"text-white text-sm",children:"One Number and Special Character"})]})]})]}),e.jsx("button",{type:"submit",className:"mt-1 bg-emerald-400 px-1 py-2 rounded-md text-base shadow-md font-bold w-72 md:w-96 text-md text-white",children:"Sign up"}),e.jsx("div",{className:"flex justify-center items-center mt-2",children:e.jsx(ye,{})})]})}),e.jsxs("span",{className:"w-full flex justify-center items-center mt-3 text-gray-300 text-lg font-bold",children:["Alredy have an account?",e.jsx(F,{to:"/signin",className:"ml-2 text-color-five font-bold underline",children:"Log in"})]}),e.jsx("div",{className:"flex justify-center items-center mt-1 mb-5 font-bold",children:e.jsxs("span",{className:"text-gray-300 text-lg",children:["Apply as a mentor?",e.jsx(F,{to:"/mentor/apply",className:"ml-2 text-color-five font-bold underline",children:"Apply now"})]})})]})})]})},Je=()=>e.jsx(e.Fragment,{children:e.jsx($e,{})});export{Je as default};
