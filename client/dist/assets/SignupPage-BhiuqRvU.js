import{r as u,p as N,q as ae,y as q,u as U,R as ie,e as x,j as s,A as le,B as S,C as ce,a as D,d as ue,L as H,F as W,D as de}from"./index-0Idiob-E.js";import{z as L,u as me,t as pe}from"./index-CfZGctG2.js";import{M as A,L as fe,B as he}from"./Toast-zZ6c-d9w.js";import{f as ge,o as _,_ as k,a as G,g as X,s as O,w as be,u as K,e as j,h as Y,b as P}from"./generateUtilityClasses-BQasaffi.js";import{e as B,u as xe,b as ve}from"./useTheme-D_hXp5Bh.js";import{a as z,u as ye}from"./useTimeout-DA_U7oCR.js";import{P as we}from"./Paper-D7aWKvjp.js";import{G as ke}from"./Grow-B5fxisfa.js";import{G as Ce}from"./index-mSdY9cEW.js";import"./emotion-react.browser.esm-aPwYqQZu.js";import"./TransitionGroupContext-5m0N1aVY.js";function $(e){return e.substring(2).toLowerCase()}function Ee(e,n){return n.documentElement.clientWidth<e.clientX||n.documentElement.clientHeight<e.clientY}function Se(e){const{children:n,disableReactTree:l=!1,mouseEvent:i="onClick",onClickAway:h,touchEvent:v="onTouchEnd"}=e,y=u.useRef(!1),g=u.useRef(null),c=u.useRef(!1),p=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const d=ge(n.ref,g),m=z(t=>{const o=p.current;p.current=!1;const f=_(g.current);if(!c.current||!g.current||"clientX"in t&&Ee(t,f))return;if(y.current){y.current=!1;return}let r;t.composedPath?r=t.composedPath().indexOf(g.current)>-1:r=!f.documentElement.contains(t.target)||g.current.contains(t.target),!r&&(l||!o)&&h(t)}),w=t=>o=>{p.current=!0;const f=n.props[t];f&&f(o)},C={ref:d};return v!==!1&&(C[v]=w(v)),u.useEffect(()=>{if(v!==!1){const t=$(v),o=_(g.current),f=()=>{y.current=!0};return o.addEventListener(t,m),o.addEventListener("touchmove",f),()=>{o.removeEventListener(t,m),o.removeEventListener("touchmove",f)}}},[m,v]),i!==!1&&(C[i]=w(i)),u.useEffect(()=>{if(i!==!1){const t=$(i),o=_(g.current);return o.addEventListener(t,m),()=>{o.removeEventListener(t,m)}}},[m,i]),N.jsx(u.Fragment,{children:u.cloneElement(n,C)})}function Ne(e={}){const{autoHideDuration:n=null,disableWindowBlurListener:l=!1,onClose:i,open:h,resumeHideDuration:v}=e,y=ye();u.useEffect(()=>{if(!h)return;function r(a){a.defaultPrevented||(a.key==="Escape"||a.key==="Esc")&&(i==null||i(a,"escapeKeyDown"))}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[h,i]);const g=z((r,a)=>{i==null||i(r,a)}),c=z(r=>{!i||r==null||y.start(r,()=>{g(null,"timeout")})});u.useEffect(()=>(h&&c(n),y.clear),[h,n,c,y]);const p=r=>{i==null||i(r,"clickaway")},d=y.clear,m=u.useCallback(()=>{n!=null&&c(v??n*.5)},[n,v,c]),w=r=>a=>{const b=r.onBlur;b==null||b(a),m()},C=r=>a=>{const b=r.onFocus;b==null||b(a),d()},t=r=>a=>{const b=r.onMouseEnter;b==null||b(a),d()},o=r=>a=>{const b=r.onMouseLeave;b==null||b(a),m()};return u.useEffect(()=>{if(!l&&h)return window.addEventListener("focus",m),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",d)}},[l,h,m,d]),{getRootProps:(r={})=>{const a=k({},B(e),B(r));return k({role:"presentation"},r,a,{onBlur:w(a),onFocus:C(a),onMouseEnter:t(a),onMouseLeave:o(a)})},onClickAway:p}}const Re=new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/),Le=new RegExp(/^[a-zA-Z]+$/),Pe=L.object({first_name:L.string({required_error:"First name is required",invalid_type_error:"First name must be a string"}).max(30,{message:"First name is too long"}).min(2,{message:"First Name must be at least 2 characters"}).refine(e=>e.trim()!=="",{message:"First name should not be empty"}),last_name:L.string({required_error:"Last name is required",invalid_type_error:"Last name must be a string"}).max(30).refine(e=>Le.test(e),{message:"Name should not contain numbers"}).refine(e=>e.trim()!=="",{message:"Last name should not be empty"}),email:L.string().email(),password:L.string({required_error:"Password is required"}).min(1,{message:"Must have at least 8 character"}).max(10,{message:"Password should belove 10 characters"}).regex(Re,{message:"Your password is not valid"})});function Oe(e){return G("MuiSnackbarContent",e)}X("MuiSnackbarContent",["root","message","action"]);const Te=["action","className","message","role"],Me=e=>{const{classes:n}=e;return Y({root:["root"],action:["action"],message:["message"]},Oe,n)},Ae=O(we,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,n)=>n.root})(({theme:e})=>{const n=e.palette.mode==="light"?.8:.98,l=be(e.palette.background.default,n);return k({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(l),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:l,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),_e=O("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,n)=>n.message})({padding:"8px 0"}),je=O("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,n)=>n.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),ze=u.forwardRef(function(n,l){const i=K({props:n,name:"MuiSnackbarContent"}),{action:h,className:v,message:y,role:g="alert"}=i,c=j(i,Te),p=i,d=Me(p);return N.jsxs(Ae,k({role:g,square:!0,elevation:6,className:ae(d.root,v),ownerState:p,ref:l},c,{children:[N.jsx(_e,{className:d.message,ownerState:p,children:y}),h?N.jsx(je,{className:d.action,ownerState:p,children:h}):null]}))}),Fe=ze;function De(e){return G("MuiSnackbar",e)}X("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const He=["onEnter","onExited"],Be=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],$e=e=>{const{classes:n,anchorOrigin:l}=e,i={root:["root",`anchorOrigin${P(l.vertical)}${P(l.horizontal)}`]};return Y(i,De,n)},I=O("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:l}=e;return[n.root,n[`anchorOrigin${P(l.anchorOrigin.vertical)}${P(l.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:n})=>{const l={left:"50%",right:"auto",transform:"translateX(-50%)"};return k({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},n.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},n.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},n.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:k({},n.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},n.anchorOrigin.horizontal==="center"&&l,n.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},n.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Ie=u.forwardRef(function(n,l){const i=K({props:n,name:"MuiSnackbar"}),h=xe(),v={enter:h.transitions.duration.enteringScreen,exit:h.transitions.duration.leavingScreen},{action:y,anchorOrigin:{vertical:g,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:d,className:m,ClickAwayListenerProps:w,ContentProps:C,disableWindowBlurListener:t=!1,message:o,open:f,TransitionComponent:r=ke,transitionDuration:a=v,TransitionProps:{onEnter:b,onExited:R}={}}=i,E=j(i.TransitionProps,He),V=j(i,Be),T=k({},i,{anchorOrigin:{vertical:g,horizontal:c},autoHideDuration:p,disableWindowBlurListener:t,TransitionComponent:r,transitionDuration:a}),J=$e(T),{getRootProps:Q,onClickAway:ee}=Ne(k({},T)),[te,F]=u.useState(!0),ne=ve({elementType:I,getSlotProps:Q,externalForwardedProps:V,ownerState:T,additionalProps:{ref:l},className:[J.root,m]}),re=M=>{F(!0),R&&R(M)},se=(M,oe)=>{F(!1),b&&b(M,oe)};return!f&&te?null:N.jsx(Se,k({onClickAway:ee},w,{children:N.jsx(I,k({},ne,{children:N.jsx(r,k({appear:!0,in:f,timeout:a,direction:g==="top"?"down":"up",onEnter:se,onExited:re},E,{children:d||N.jsx(Fe,k({message:o,action:y},C))}))}))}))}),Z=Ie,qe=({openModal:e,setOpenModal:n,serverResponse:l})=>{const i=q(),h=U(),[v,y]=ie.useState(!1),g=(t,o)=>{o!=="clickaway"&&y(!1)},c=u.useRef(null),p=u.useRef(null),d=u.useRef(null),m=u.useRef(null),w=async()=>{var t;if(c.current&&p.current&&d.current&&m.current)if(c.current.value.length&&p.current.value.length&&d.current.value.length&&c.current.value.length>0)try{const o=c.current.value,f=p.current.value,r=d.current.value,a=m.current.value,b=o+f+r+a;if(l){l.otp=b;const R=await i(le(l));if(R){const E=R.payload;E.status==404?S.error(E.message):E.status==400?S.error(E.message):((t=E==null?void 0:E.user)==null?void 0:t.role)==="mentee"&&h("/")}}else console.log("Server Response is Null"),S.error("Something went wrong")}catch(o){typeof o=="string"&&console.log(o)}else console.log("Invalid OTP"),S.error("Invalid OTP")},C=async()=>{try{(await ce.post("/resendOTP",{serverResponse:l})).data.status=="success"?y(!0):S("Please Try Again")}catch(t){console.log(t)}};return x(A,{show:e,size:"md",onClose:()=>n(!1),popup:!0,children:[s(A.Header,{}),x(A.Body,{children:[s(Z,{open:v,autoHideDuration:5e3,onClose:g,message:"Email sent Successfully"}),s("h3",{className:"text-xl font-medium text-gray-900 dark:text-white ml-2",children:"Enter the OTP"}),x("div",{className:"otp-box",children:[s("div",{className:"mb-2 block",children:s(fe,{htmlFor:"email",value:"Please enter the OTP that send to youre email",className:"ml-2"})}),s("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:c,autoFocus:!0,onChange:t=>{var o;t.target.value&&t.target.value.length>1&&c.current&&(c.current.value=t.target.value[1]),(o=p.current)==null||o.focus()}}),s("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:p,onChange:t=>{var o;t.target.value&&t.target.value.length>1&&p.current&&(p.current.value=t.target.value[1]),(o=d.current)==null||o.focus()}}),s("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:d,onChange:t=>{var o;t.target.value&&t.target.value.length>1&&d.current&&(d.current.value=t.target.value[1]),(o=m.current)==null||o.focus()}}),s("input",{type:"number",size:1,maxLength:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:m,onChange:t=>{t.target.value&&t.target.value.length>1&&m.current&&(m.current.value=t.target.value[1])}}),x("div",{className:"w-full mt-3 ml-2",children:[s(he,{onClick:w,children:"Submit"}),s("button",{className:"text-blue-700 mt-4 underline",onClick:C,children:"Re-Send OTP"})]})]})]})]})},Ue=()=>{const{user:e}=D(f=>f.userAuth),[n,l]=u.useState(!1),[i,h]=u.useState(!1),{isLoading:v}=D(f=>f.userAuth),y=q(),g=ue(),c=U();u.useEffect(()=>{(async()=>{try{if((await g.get("/checkToken",{withCredentials:!0})).data.status==="exists"){if((e==null?void 0:e.role)==="mentee"){c("/");return}if((e==null?void 0:e.role)==="mentor"){c("/mentor/home");return}if((e==null?void 0:e.role)==="admin"){c("/admin/dashboard");return}}else console.log("User not logged In")}catch(r){console.error("Error checking token:",r)}})()},[g,c,e==null?void 0:e.role]);const p=(f,r)=>{r!=="clickaway"&&h(!1)},[d,m]=u.useState(null),{register:w,handleSubmit:C,formState:{errors:t}}=me({resolver:pe(Pe)});return x(W,{children:[s(qe,{openModal:n,setOpenModal:l,serverResponse:d}),s(Z,{open:i,autoHideDuration:5e3,onClose:p,message:"Email sent Successfully"}),v?s("h1",{className:"font-bold",children:"Loading..."}):s("div",{children:x("div",{className:"w-full h-screen flex justify-center items-center flex-col bg-background-two",children:[s("form",{onSubmit:C(async f=>{var r;try{const a=await y(de(f));if(a.payload.status==="success"){if(a.payload.user){const b=a.payload.user;m(b),l(!0),h(!0)}}else S.error(a.payload.message)}catch(a){((r=a.response)==null?void 0:r.status)===409?S.error("Email Alredy Exists"):S.error("Something went wrong")}}),className:"flex items-center justify-center",children:x("div",{className:"mt-5 flex items-center justify-center flex-col border px-5 py-5 rounded-md",children:[s("h2",{className:"text-2xl text-center font-bold text-white py-3",children:"Sign up as Mentee"}),x("label",{children:[s("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-white border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"First name",type:"text",...w("first_name")}),t.first_name&&x("small",{className:"text-red-500 text-sm italic",children:["*",t.first_name.message]})]}),x("label",{children:[s("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-white mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Last name",type:"text",...w("last_name")}),t.last_name&&x("span",{className:"text-red-500 text-sm italic",children:["*",t.last_name.message]})]}),x("label",{children:[s("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-white mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Email",type:"text",...w("email")}),t.email&&x("span",{className:"text-red-500 text-sm italic",children:["*",t.email.message]})]}),x("label",{children:[s("input",{className:"placeholder:text-gray-400 block bg-gray-800 text-white mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Password",type:"password",...w("password")}),t.password&&x("span",{className:"text-red-500 text-sm italic",children:["*",t.password.message]}),x("div",{className:"py-2",children:[s("span",{className:"text-white",children:"Password should have :"}),x("div",{className:"",children:[s("li",{className:"text-white text-sm",children:"Atleast 8 characters long"}),s("li",{className:"text-white text-sm",children:"One uppercase and Lowercase letter"}),s("li",{className:"text-white text-sm",children:"One Number and Special Character"})]})]})]}),s("button",{type:"submit",className:"mt-1 bg-color-five px-1 py-2 rounded-md text-base shadow-md font-bold w-72 md:w-96 text-md text-white",children:"Sign up"}),s("div",{className:"flex justify-center items-center mt-2",children:s(Ce,{})})]})}),x("span",{className:"w-full flex justify-center items-center mt-3 text-gray-300 text-lg font-bold",children:["Alredy have an account?",s(H,{to:"/signin",className:"ml-2 text-color-five font-bold underline",children:"Log in"})]}),s("div",{className:"flex justify-center items-center mt-1 mb-5 font-bold",children:x("span",{className:"text-gray-300 text-lg",children:["Apply as a mentor?",s(H,{to:"/mentor/apply/1",className:"ml-2 text-color-five font-bold underline",children:"Apply now"})]})})]})})]})},nt=()=>s(W,{children:s(Ue,{})});export{nt as default};
