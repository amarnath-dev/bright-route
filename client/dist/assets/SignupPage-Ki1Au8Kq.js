import{r as u,j as t,c as se,b as $,u as I,R as re,s as oe,B as C,A as ae,a as B,d as le,L as F,e as ie}from"./index-g0sAwdL0.js";import{z as S,u as ce,t as ue}from"./index-M60Np0ws.js";import{M as O,L as de,B as me}from"./Toast-nbcniTx-.js";import{u as fe,a as M,o as T,b as pe,_ as k,g as U,c as W,s as N,e as ge,d as G,f as A,h as q,i as R}from"./useThemeProps-HKTc5qxQ.js";import{e as H,u as he,a as xe,G as be}from"./Grow-BNISfoHN.js";import{P as ve}from"./Paper-XJY6ktkk.js";import{G as ye}from"./GoogleAuth-cTwRYAZ2.js";import"./TransitionGroupContext-dsdm-qc_.js";const ke=/^(?=.*[A-Za-z])(?=.*\d).{4,10}$/,we=/^[a-zA-Z]+$/,je=S.object({first_name:S.string().max(30).refine(e=>e.trim()!=="",{message:"First name should not be empty"}),last_name:S.string().max(30).refine(e=>we.test(e),{message:"Name should not contain numbers"}).refine(e=>e.trim()!=="",{message:"Last name should not be empty"}),email:S.string().email(),password:S.string().min(4).refine(e=>ke.test(e),{message:"Password should contain letters and numbers"})});function _(e){return e.substring(2).toLowerCase()}function Ce(e,s){return s.documentElement.clientWidth<e.clientX||s.documentElement.clientHeight<e.clientY}function Ee(e){const{children:s,disableReactTree:i=!1,mouseEvent:l="onClick",onClickAway:g,touchEvent:b="onTouchEnd"}=e,v=u.useRef(!1),h=u.useRef(null),c=u.useRef(!1),f=u.useRef(!1);u.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const d=fe(s.ref,h),m=M(n=>{const o=f.current;f.current=!1;const p=T(h.current);if(!c.current||!h.current||"clientX"in n&&Ce(n,p))return;if(v.current){v.current=!1;return}let r;n.composedPath?r=n.composedPath().indexOf(h.current)>-1:r=!p.documentElement.contains(n.target)||h.current.contains(n.target),!r&&(i||!o)&&g(n)}),y=n=>o=>{f.current=!0;const p=s.props[n];p&&p(o)},w={ref:d};return b!==!1&&(w[b]=y(b)),u.useEffect(()=>{if(b!==!1){const n=_(b),o=T(h.current),p=()=>{v.current=!0};return o.addEventListener(n,m),o.addEventListener("touchmove",p),()=>{o.removeEventListener(n,m),o.removeEventListener("touchmove",p)}}},[m,b]),l!==!1&&(w[l]=y(l)),u.useEffect(()=>{if(l!==!1){const n=_(l),o=T(h.current);return o.addEventListener(n,m),()=>{o.removeEventListener(n,m)}}},[m,l]),t.jsx(u.Fragment,{children:u.cloneElement(s,w)})}function Se(e={}){const{autoHideDuration:s=null,disableWindowBlurListener:i=!1,onClose:l,open:g,resumeHideDuration:b}=e,v=pe();u.useEffect(()=>{if(!g)return;function r(a){a.defaultPrevented||(a.key==="Escape"||a.key==="Esc")&&(l==null||l(a,"escapeKeyDown"))}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[g,l]);const h=M((r,a)=>{l==null||l(r,a)}),c=M(r=>{!l||r==null||v.start(r,()=>{h(null,"timeout")})});u.useEffect(()=>(g&&c(s),v.clear),[g,s,c,v]);const f=r=>{l==null||l(r,"clickaway")},d=v.clear,m=u.useCallback(()=>{s!=null&&c(b??s*.5)},[s,b,c]),y=r=>a=>{const x=r.onBlur;x==null||x(a),m()},w=r=>a=>{const x=r.onFocus;x==null||x(a),d()},n=r=>a=>{const x=r.onMouseEnter;x==null||x(a),d()},o=r=>a=>{const x=r.onMouseLeave;x==null||x(a),m()};return u.useEffect(()=>{if(!i&&g)return window.addEventListener("focus",m),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",d)}},[i,g,m,d]),{getRootProps:(r={})=>{const a=k({},H(e),H(r));return k({role:"presentation"},r,a,{onBlur:y(a),onFocus:w(a),onMouseEnter:n(a),onMouseLeave:o(a)})},onClickAway:f}}function Re(e){return U("MuiSnackbarContent",e)}W("MuiSnackbarContent",["root","message","action"]);const Ne=["action","className","message","role"],Le=e=>{const{classes:s}=e;return q({root:["root"],action:["action"],message:["message"]},Re,s)},Pe=N(ve,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,s)=>s.root})(({theme:e})=>{const s=e.palette.mode==="light"?.8:.98,i=ge(e.palette.background.default,s);return k({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(i),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:i,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Oe=N("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,s)=>s.message})({padding:"8px 0"}),Te=N("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,s)=>s.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Me=u.forwardRef(function(s,i){const l=G({props:s,name:"MuiSnackbarContent"}),{action:g,className:b,message:v,role:h="alert"}=l,c=A(l,Ne),f=l,d=Le(f);return t.jsxs(Pe,k({role:h,square:!0,elevation:6,className:se(d.root,b),ownerState:f,ref:i},c,{children:[t.jsx(Oe,{className:d.message,ownerState:f,children:v}),g?t.jsx(Te,{className:d.action,ownerState:f,children:g}):null]}))}),Ae=Me;function ze(e){return U("MuiSnackbar",e)}W("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Be=["onEnter","onExited"],Fe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],He=e=>{const{classes:s,anchorOrigin:i}=e,l={root:["root",`anchorOrigin${R(i.vertical)}${R(i.horizontal)}`]};return q(l,ze,s)},D=N("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:i}=e;return[s.root,s[`anchorOrigin${R(i.anchorOrigin.vertical)}${R(i.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:s})=>{const i={left:"50%",right:"auto",transform:"translateX(-50%)"};return k({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},s.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},s.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},s.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:k({},s.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},s.anchorOrigin.horizontal==="center"&&i,s.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},s.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),_e=u.forwardRef(function(s,i){const l=G({props:s,name:"MuiSnackbar"}),g=he(),b={enter:g.transitions.duration.enteringScreen,exit:g.transitions.duration.leavingScreen},{action:v,anchorOrigin:{vertical:h,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:f=null,children:d,className:m,ClickAwayListenerProps:y,ContentProps:w,disableWindowBlurListener:n=!1,message:o,open:p,TransitionComponent:r=be,transitionDuration:a=b,TransitionProps:{onEnter:x,onExited:E}={}}=l,j=A(l.TransitionProps,Be),K=A(l,Fe),L=k({},l,{anchorOrigin:{vertical:h,horizontal:c},autoHideDuration:f,disableWindowBlurListener:n,TransitionComponent:r,transitionDuration:a}),Z=He(L),{getRootProps:Y,onClickAway:J}=Se(k({},L)),[Q,z]=u.useState(!0),V=xe({elementType:D,getSlotProps:Y,externalForwardedProps:K,ownerState:L,additionalProps:{ref:i},className:[Z.root,m]}),ee=P=>{z(!0),E&&E(P)},te=(P,ne)=>{z(!1),x&&x(P,ne)};return!p&&Q?null:t.jsx(Ee,k({onClickAway:J},y,{children:t.jsx(D,k({},V,{children:t.jsx(r,k({appear:!0,in:p,timeout:a,direction:h==="top"?"down":"up",onEnter:te,onExited:ee},j,{children:d||t.jsx(Ae,k({message:o,action:v},w))}))}))}))}),X=_e,De=({openModal:e,setOpenModal:s,serverResponse:i})=>{const l=$(),g=I(),[b,v]=re.useState(!1),h=(n,o)=>{o!=="clickaway"&&v(!1)},c=u.useRef(null),f=u.useRef(null),d=u.useRef(null),m=u.useRef(null),y=async()=>{var n;if(c.current&&f.current&&d.current&&m.current)if(c.current.value.length&&f.current.value.length&&d.current.value.length&&c.current.value.length>0)try{const o=c.current.value,p=f.current.value,r=d.current.value,a=m.current.value,x=o+p+r+a;if(i){i.otp=x;const E=await l(oe(i));if(E){const j=E.payload;j.status==404?C.error(j.message):j.status==400?C.error(j.message):((n=j==null?void 0:j.user)==null?void 0:n.role)==="mentee"&&g("/")}}else console.log("Server Response is Null"),C.error("Something went wrong")}catch(o){typeof o=="string"&&console.log(o)}else console.log("Invalid OTP"),C.error("Invalid OTP")},w=async()=>{try{(await ae.post("/resendOTP",{serverResponse:i})).data.status=="success"?v(!0):C("Please Try Again")}catch(n){console.log(n)}};return t.jsxs(O,{show:e,size:"md",onClose:()=>s(!1),popup:!0,children:[t.jsx(O.Header,{}),t.jsxs(O.Body,{children:[t.jsx(X,{open:b,autoHideDuration:5e3,onClose:h,message:"Email sent Successfully"}),t.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white ml-2",children:"Enter the OTP"}),t.jsxs("div",{className:"otp-box",children:[t.jsx("div",{className:"mb-2 block",children:t.jsx(de,{htmlFor:"email",value:"Please enter the OTP that send to youre email",className:"ml-2"})}),t.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:c,autoFocus:!0,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&c.current&&(c.current.value=n.target.value[1]),(o=f.current)==null||o.focus()}}),t.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:f,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&f.current&&(f.current.value=n.target.value[1]),(o=d.current)==null||o.focus()}}),t.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:d,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&d.current&&(d.current.value=n.target.value[1]),(o=m.current)==null||o.focus()}}),t.jsx("input",{type:"number",size:1,maxLength:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:m,onChange:n=>{n.target.value&&n.target.value.length>1&&m.current&&(m.current.value=n.target.value[1])}}),t.jsxs("div",{className:"w-full mt-3 ml-2",children:[t.jsx(me,{onClick:y,children:"Submit"}),t.jsx("button",{className:"text-blue-700 mt-4 underline",onClick:w,children:"Re-Send OTP"})]})]})]})]})},$e=()=>{const{user:e}=B(p=>p.userAuth),[s,i]=u.useState(!1),[l,g]=u.useState(!1),{isLoading:b}=B(p=>p.userAuth),v=$(),h=le(),c=I();u.useEffect(()=>{(async()=>{try{if((await h.get("/checkToken",{withCredentials:!0})).data.status==="exists"){if((e==null?void 0:e.role)==="mentee"){c("/");return}if((e==null?void 0:e.role)==="mentor"){c("/mentor/home");return}if((e==null?void 0:e.role)==="admin"){c("/admin/dashboard");return}}else console.log("User not logged In")}catch(r){console.error("Error checking token:",r)}})()},[h,c,e==null?void 0:e.role]);const f=(p,r)=>{r!=="clickaway"&&g(!1)},[d,m]=u.useState(null),{register:y,handleSubmit:w,formState:{errors:n}}=ce({resolver:ue(je)}),o=async p=>{var r;try{const a=await v(ie(p));if(a.payload.status==="success"){if(a.payload.user){const x=a.payload.user;m(x),i(!0),g(!0)}}else C.error(a.payload.message)}catch(a){((r=a.response)==null?void 0:r.status)===409?C.error("Email Alredy Exists"):C.error("Something went wrong")}};return t.jsxs(t.Fragment,{children:[t.jsx(De,{openModal:s,setOpenModal:i,serverResponse:d}),t.jsx(X,{open:l,autoHideDuration:5e3,onClose:f,message:"Email sent Successfully"}),b?t.jsx("h1",{className:"font-bold",children:"Loading..."}):t.jsx("div",{children:t.jsxs("div",{className:"w-full h-screen flex justify-center items-center flex-col bg-background-two",children:[t.jsx("form",{onSubmit:w(o),className:"flex items-center justify-center",children:t.jsxs("div",{className:"mt-5 flex items-center justify-center flex-col border px-5 py-5 rounded-md",children:[t.jsx("h2",{className:"text-2xl text-center font-bold text-gray-400 py-3",children:"Sign up as Mentee"}),t.jsxs("label",{children:[t.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"First name",type:"text",required:!0,...y("first_name")}),n.first_name&&t.jsxs("small",{className:"text-red-500 text-sm italic",children:["*",n.first_name.message]})]}),t.jsxs("label",{children:[t.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Last name",type:"text",required:!0,...y("last_name")}),n.last_name&&t.jsxs("span",{className:"text-red-500 text-sm italic",children:["*",n.last_name.message]})]}),t.jsxs("label",{children:[t.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Email",type:"text",required:!0,...y("email")}),n.email&&t.jsxs("span",{className:"text-red-500 text-sm italic",children:["*",n.email.message]})]}),t.jsxs("label",{children:[t.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Password",type:"password",required:!0,...y("password")}),n.password&&t.jsxs("span",{className:"text-red-500 text-sm italic",children:["*",n.password.message]})]}),t.jsx("br",{}),t.jsx("button",{type:"submit",className:"bg-emerald-400 px-1 py-2 mt-1 rounded-md text-base shadow-md font-bold w-72 md:w-96 sm:text-sm text-white",children:"Sign up"}),t.jsx("div",{className:"flex justify-center items-center mt-5",children:t.jsx(ye,{})})]})}),t.jsxs("span",{className:"w-full flex justify-center items-center mt-3 text-gray-500",children:["Alredy have an account?",t.jsx(F,{to:"/signin",className:"ml-2 text-color-five font-bold",children:"Log in"})]}),t.jsx("div",{className:"flex justify-center items-center mt-1 mb-5",children:t.jsxs("span",{className:"text-gray-500",children:["Apply as a mentor?",t.jsx(F,{to:"/mentor/apply",className:"ml-2 text-color-five font-bold",children:"Apply now"})]})})]})})]})},Ye=()=>t.jsx(t.Fragment,{children:t.jsx($e,{})});export{Ye as default};
