import{r as f,j as e,c as oe,b as I,u as U,R as W,s as ae,B as C,A as le,a as B,d as ie,Q as ce,L as F,e as ue}from"./index-0cbBuzyu.js";import{z as S,u as de,t as me}from"./index-CWjSOE75.js";import{M as O,L as fe,B as pe}from"./Toast-8xGeoO0i.js";import{u as ge,a as M,o as T,b as he,_ as k,g as G,c as X,s as R,e as xe,d as K,f as A,h as Z,i as N}from"./useThemeProps-fGDrEsnV.js";import{e as H,u as be,a as ve,G as ye}from"./Grow-VsjqjF9n.js";import{P as ke}from"./Paper-tj99nctI.js";import{G as we}from"./GoogleAuth-08bExCxp.js";import"./TransitionGroupContext-66z7CFgi.js";const je=/^(?=.*[A-Za-z])(?=.*\d).{4,10}$/,_=/^[a-zA-Z]+$/,Ce=S.object({first_name:S.string().min(3).max(30).refine(t=>_.test(t),{message:"Name shoul not contain numbers"}).refine(t=>t.trim()!=="",{message:"First name should not be empty"}),last_name:S.string().min(3).max(30).refine(t=>_.test(t),{message:"Name shoul not contain numbers"}).refine(t=>t.trim()!=="",{message:"Last name should not be empty"}),email:S.string().email(),password:S.string().min(4).refine(t=>je.test(t),{message:"Password should contain letters and numbers"})});function D(t){return t.substring(2).toLowerCase()}function Ee(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function Se(t){const{children:s,disableReactTree:c=!1,mouseEvent:a="onClick",onClickAway:b,touchEvent:v="onTouchEnd"}=t,i=f.useRef(!1),h=f.useRef(null),u=f.useRef(!1),p=f.useRef(!1);f.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const d=ge(s.ref,h),m=M(n=>{const o=p.current;p.current=!1;const g=T(h.current);if(!u.current||!h.current||"clientX"in n&&Ee(n,g))return;if(i.current){i.current=!1;return}let r;n.composedPath?r=n.composedPath().indexOf(h.current)>-1:r=!g.documentElement.contains(n.target)||h.current.contains(n.target),!r&&(c||!o)&&b(n)}),y=n=>o=>{p.current=!0;const g=s.props[n];g&&g(o)},w={ref:d};return v!==!1&&(w[v]=y(v)),f.useEffect(()=>{if(v!==!1){const n=D(v),o=T(h.current),g=()=>{i.current=!0};return o.addEventListener(n,m),o.addEventListener("touchmove",g),()=>{o.removeEventListener(n,m),o.removeEventListener("touchmove",g)}}},[m,v]),a!==!1&&(w[a]=y(a)),f.useEffect(()=>{if(a!==!1){const n=D(a),o=T(h.current);return o.addEventListener(n,m),()=>{o.removeEventListener(n,m)}}},[m,a]),e.jsx(f.Fragment,{children:f.cloneElement(s,w)})}function Ne(t={}){const{autoHideDuration:s=null,disableWindowBlurListener:c=!1,onClose:a,open:b,resumeHideDuration:v}=t,i=he();f.useEffect(()=>{if(!b)return;function r(l){l.defaultPrevented||(l.key==="Escape"||l.key==="Esc")&&(a==null||a(l,"escapeKeyDown"))}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[b,a]);const h=M((r,l)=>{a==null||a(r,l)}),u=M(r=>{!a||r==null||i.start(r,()=>{h(null,"timeout")})});f.useEffect(()=>(b&&u(s),i.clear),[b,s,u,i]);const p=r=>{a==null||a(r,"clickaway")},d=i.clear,m=f.useCallback(()=>{s!=null&&u(v??s*.5)},[s,v,u]),y=r=>l=>{const x=r.onBlur;x==null||x(l),m()},w=r=>l=>{const x=r.onFocus;x==null||x(l),d()},n=r=>l=>{const x=r.onMouseEnter;x==null||x(l),d()},o=r=>l=>{const x=r.onMouseLeave;x==null||x(l),m()};return f.useEffect(()=>{if(!c&&b)return window.addEventListener("focus",m),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",d)}},[c,b,m,d]),{getRootProps:(r={})=>{const l=k({},H(t),H(r));return k({role:"presentation"},r,l,{onBlur:y(l),onFocus:w(l),onMouseEnter:n(l),onMouseLeave:o(l)})},onClickAway:p}}function Re(t){return G("MuiSnackbarContent",t)}X("MuiSnackbarContent",["root","message","action"]);const Le=["action","className","message","role"],Pe=t=>{const{classes:s}=t;return Z({root:["root"],action:["action"],message:["message"]},Re,s)},Oe=R(ke,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>{const s=t.palette.mode==="light"?.8:.98,c=xe(t.palette.background.default,s);return k({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(c),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:c,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Te=R("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,s)=>s.message})({padding:"8px 0"}),Me=R("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,s)=>s.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Ae=f.forwardRef(function(s,c){const a=K({props:s,name:"MuiSnackbarContent"}),{action:b,className:v,message:i,role:h="alert"}=a,u=A(a,Le),p=a,d=Pe(p);return e.jsxs(Oe,k({role:h,square:!0,elevation:6,className:oe(d.root,v),ownerState:p,ref:c},u,{children:[e.jsx(Te,{className:d.message,ownerState:p,children:i}),b?e.jsx(Me,{className:d.action,ownerState:p,children:b}):null]}))}),ze=Ae;function Be(t){return G("MuiSnackbar",t)}X("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Fe=["onEnter","onExited"],He=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],_e=t=>{const{classes:s,anchorOrigin:c}=t,a={root:["root",`anchorOrigin${N(c.vertical)}${N(c.horizontal)}`]};return Z(a,Be,s)},$=R("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:c}=t;return[s.root,s[`anchorOrigin${N(c.anchorOrigin.vertical)}${N(c.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:s})=>{const c={left:"50%",right:"auto",transform:"translateX(-50%)"};return k({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},s.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},s.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},s.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:k({},s.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},s.anchorOrigin.horizontal==="center"&&c,s.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},s.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),De=f.forwardRef(function(s,c){const a=K({props:s,name:"MuiSnackbar"}),b=be(),v={enter:b.transitions.duration.enteringScreen,exit:b.transitions.duration.leavingScreen},{action:i,anchorOrigin:{vertical:h,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:p=null,children:d,className:m,ClickAwayListenerProps:y,ContentProps:w,disableWindowBlurListener:n=!1,message:o,open:g,TransitionComponent:r=ye,transitionDuration:l=v,TransitionProps:{onEnter:x,onExited:E}={}}=a,j=A(a.TransitionProps,Fe),Q=A(a,He),L=k({},a,{anchorOrigin:{vertical:h,horizontal:u},autoHideDuration:p,disableWindowBlurListener:n,TransitionComponent:r,transitionDuration:l}),Y=_e(L),{getRootProps:J,onClickAway:V}=Ne(k({},L)),[ee,z]=f.useState(!0),te=ve({elementType:$,getSlotProps:J,externalForwardedProps:Q,ownerState:L,additionalProps:{ref:c},className:[Y.root,m]}),ne=P=>{z(!0),E&&E(P)},se=(P,re)=>{z(!1),x&&x(P,re)};return!g&&ee?null:e.jsx(Se,k({onClickAway:V},y,{children:e.jsx($,k({},te,{children:e.jsx(r,k({appear:!0,in:g,timeout:l,direction:h==="top"?"down":"up",onEnter:se,onExited:ne},j,{children:d||e.jsx(ze,k({message:o,action:i},w))}))}))}))}),q=De,$e=({openModal:t,setOpenModal:s,serverResponse:c})=>{const a=I(),b=U(),[v,i]=W.useState(!1),h=(n,o)=>{o!=="clickaway"&&i(!1)},u=f.useRef(null),p=f.useRef(null),d=f.useRef(null),m=f.useRef(null),y=async()=>{var n;if(u.current&&p.current&&d.current&&m.current)if(u.current.value.length&&p.current.value.length&&d.current.value.length&&u.current.value.length>0)try{const o=u.current.value,g=p.current.value,r=d.current.value,l=m.current.value,x=o+g+r+l;if(c){c.otp=x;const E=await a(ae(c));if(E){const j=E.payload;j.status==404?C.error(j.message):j.status==400?C.error(j.message):((n=j==null?void 0:j.user)==null?void 0:n.role)==="mentee"&&b("/")}}else console.log("Server Response is Null"),C.error("Something went wrong")}catch(o){typeof o=="string"&&console.log(o)}else console.log("Invalid OTP"),C.error("Invalid OTP")},w=async()=>{try{(await le.post("/resendOTP",{serverResponse:c})).data.status=="success"?i(!0):C("Please Try Again")}catch(n){console.log(n)}};return e.jsxs(O,{show:t,size:"md",onClose:()=>s(!1),popup:!0,children:[e.jsx(O.Header,{}),e.jsxs(O.Body,{children:[e.jsx(q,{open:v,autoHideDuration:5e3,onClose:h,message:"Email sent Successfully"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white ml-2",children:"Enter the OTP"}),e.jsxs("div",{className:"otp-box",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(fe,{htmlFor:"email",value:"Please enter the OTP that send to youre email",className:"ml-2"})}),e.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:u,autoFocus:!0,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&u.current&&(u.current.value=n.target.value[1]),(o=p.current)==null||o.focus()}}),e.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:p,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&p.current&&(p.current.value=n.target.value[1]),(o=d.current)==null||o.focus()}}),e.jsx("input",{type:"number",size:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:d,onChange:n=>{var o;n.target.value&&n.target.value.length>1&&d.current&&(d.current.value=n.target.value[1]),(o=m.current)==null||o.focus()}}),e.jsx("input",{type:"number",size:1,maxLength:1,className:"w-12 h-12 rounded-lg indent-5 ml-2",ref:m,onChange:n=>{n.target.value&&n.target.value.length>1&&m.current&&(m.current.value=n.target.value[1])}}),e.jsxs("div",{className:"w-full mt-3 ml-2",children:[e.jsx(pe,{onClick:y,children:"Submit"}),e.jsx("button",{className:"text-blue-700 mt-4 underline",onClick:w,children:"Re-Send OTP"})]})]})]})]})},Ie=()=>{const[t,s]=f.useState(!1),[c,a]=W.useState(!1),{isLoading:b}=B(g=>g.userAuth),v=I(),{user:i}=B(g=>g.userAuth),h=ie(),u=U();f.useEffect(()=>{(async()=>{try{if((await h.get("/checkToken",{withCredentials:!0})).data.status==="exists"){if((i==null?void 0:i.role)==="mentee"){u("/");return}if((i==null?void 0:i.role)==="mentor"){u("/mentor/home");return}if((i==null?void 0:i.role)==="admin"){u("/admin/dashboard");return}}else console.log("User not logged In")}catch(r){console.error("Error checking token:",r)}})()},[h,u,i==null?void 0:i.role]);const p=(g,r)=>{r!=="clickaway"&&a(!1)},[d,m]=f.useState(null),{register:y,handleSubmit:w,formState:{errors:n}}=de({resolver:me(Ce)}),o=async g=>{var r;try{const l=await v(ue(g));if(l.payload.status==="success"){if(l.payload.user){const x=l.payload.user;m(x),s(!0),a(!0),C("Email Sent Successfull")}}else console.log("Auth service signupOtpSend rejected"),C.error("Something went wrong")}catch(l){((r=l.response)==null?void 0:r.status)===409?C.error("Email Alredy Exists"):C.error("Something went wrong")}};return e.jsxs(e.Fragment,{children:[e.jsx($e,{openModal:t,setOpenModal:s,serverResponse:d}),e.jsx(q,{open:c,autoHideDuration:5e3,onClose:p,message:"Email sent Successfully"}),e.jsx(ce,{className:"w-40 md:w-80"}),b?e.jsx("h1",{className:"font-bold",children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:"w-full h-screen flex justify-center items-center flex-col bg-background-two",children:[e.jsx("form",{onSubmit:w(o),className:"flex items-center justify-center",children:e.jsxs("div",{className:"mt-5 flex items-center justify-center flex-col border px-5 py-5 rounded-md",children:[e.jsx("h2",{className:"text-2xl text-center font-bold text-gray-400 py-3",children:"Sign up as Mentee"}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"First name",type:"text",...y("first_name")}),n.first_name&&e.jsxs("small",{className:"text-red-600 text-sm italic",children:["*",n.first_name.message]})]}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Last name",type:"text",...y("last_name")}),n.last_name&&e.jsxs("span",{className:"text-red-600 text-sm italic",children:["*",n.last_name.message]})]}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Email",type:"text",...y("email")}),n.email&&e.jsxs("span",{className:"text-red-600 text-sm italic",children:["*",n.email.message]})]}),e.jsxs("label",{children:[e.jsx("input",{className:"placeholder:text-slate-400 block bg-gray-800 text-gray-400 mt-2 border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-md focus:outline-none focus:border-dark-500 focus:ring-dark-500 focus:ring-1 w-72 md:w-96 sm:text-sm",placeholder:"Password",type:"password",...y("password")}),n.password&&e.jsxs("span",{className:"text-red-600 text-sm italic",children:["*",n.password.message]})]}),e.jsx("br",{}),e.jsx("button",{type:"submit",className:"bg-emerald-400 px-1 py-2 mt-1 rounded-md text-base shadow-md font-bold w-72 md:w-96 sm:text-sm text-white",children:"Sign up"}),e.jsx("div",{className:"flex justify-center items-center mt-5",children:e.jsx(we,{})})]})}),e.jsxs("span",{className:"w-full flex justify-center items-center mt-3 text-gray-500",children:["Alredy have an account?",e.jsx(F,{to:"/signin",className:"ml-2 text-color-five font-bold",children:"Log in"})]}),e.jsx("div",{className:"flex justify-center items-center mt-1 mb-5",children:e.jsxs("span",{className:"text-gray-500",children:["Apply as a mentor?",e.jsx(F,{to:"/mentor/apply",className:"ml-2 text-color-five font-bold",children:"Apply now"})]})})]})})]})},Ye=()=>e.jsx(e.Fragment,{children:e.jsx(Ie,{})});export{Ye as default};
