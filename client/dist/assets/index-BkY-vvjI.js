import{r as n,a as w,d as k,j as t,e as m,F as f,B,S,u as E,w as F,f as L,s as _,g as O}from"./index-BzStZP5O.js";import{N as y,D as g,A as T}from"./Toast-D41vcFYR.js";import{G as N,F as V,a as W}from"./index-CwWqD5-f.js";import{f as $}from"./index-BasLQgpR.js";/* empty css                     */import{N as j}from"./no-profile-image-7REqqSE_.js";function G(r){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M408 64H104a56.16 56.16 0 0 0-56 56v192a56.16 56.16 0 0 0 56 56h40v80l93.72-78.14a8 8 0 0 1 5.13-1.86H408a56.16 56.16 0 0 0 56-56V120a56.16 56.16 0 0 0-56-56z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"216",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"216",r:"32"},child:[]}]})(r)}function R(r){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.08 341.31c-1.66-2-3.29-4-4.89-5.93-22-26.61-35.31-42.67-35.31-118 0-39-9.33-71-27.72-95-13.56-17.73-31.89-31.18-56.05-41.12a3 3 0 0 1-.82-.67C306.6 51.49 282.82 32 256 32s-50.59 19.49-59.28 48.56a3.13 3.13 0 0 1-.81.65c-56.38 23.21-83.78 67.74-83.78 136.14 0 75.36-13.29 91.42-35.31 118-1.6 1.93-3.23 3.89-4.89 5.93a35.16 35.16 0 0 0-4.65 37.62c6.17 13 19.32 21.07 34.33 21.07H410.5c14.94 0 28-8.06 34.19-21a35.17 35.17 0 0 0-4.61-37.66zM256 480a80.06 80.06 0 0 0 70.44-42.13 4 4 0 0 0-3.54-5.87H189.12a4 4 0 0 0-3.55 5.87A80.06 80.06 0 0 0 256 480z"},child:[]}]})(r)}function U(r){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(r)}function q(r){return N({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(r)}const J=({setOpen:r,notData:e})=>{const[o,u]=n.useState([]),{user:i}=w(l=>l.userAuth),p=k(),s=()=>{r(!1)};n.useEffect(()=>{(async()=>{var l;try{const c=await p.get(`/notification/getNotifications/${i==null?void 0:i._id}`,{withCredentials:!0});u((l=c.data)==null?void 0:l.notifications)}catch(c){console.log(c)}})()},[e,i==null?void 0:i._id,p]);const x=async l=>{try{if((await p.delete(`/notification/delete/${l}`,{withCredentials:!0})).data.status==="success"){const v=o==null?void 0:o.map(h=>(h==null?void 0:h._id)===l?{...h,isDeleted:!0}:h);u(v),B.success("Notification Deleted")}}catch(c){console.log(c)}};return t(f,{children:m("div",{className:"w-96 h-screen shadow-lg rounded-lg bg-gray-800 overflow-y-scroll px-5 py-2",children:[m("div",{className:"text-start font-bold text-white flex justify-between",children:[t("h1",{className:"py-2 px-2 text-xl text-white",children:"Alerts"}),t("span",{className:"px-1 py-2",children:t(U,{className:"text-3xl cursor-pointer rounded-full hover:bg-gray-200",onClick:s})})]}),t("div",{className:"flex justify-start items-start flex-col mx-1 my-1",children:(o==null?void 0:o.length)>0?t("div",{className:"flex-wrap rounded-lg w-full",children:o==null?void 0:o.map((l,c)=>t("div",{className:"px-2 py-1 w-full cursor-pointer rounded-md",children:l!=null&&l.isDeleted?"":t(f,{children:m("div",{children:[t("span",{className:"flex justify-end",children:t(q,{className:"text-xl text-white rounded-full",onClick:()=>x(l==null?void 0:l._id)})}),t("p",{className:"text-white rounded-md px-2",children:l==null?void 0:l.content},c),t("small",{className:"text-gray-300 px-2",children:$(l==null?void 0:l.createdAt)})]})})},c))}):t(f,{children:t("div",{children:t("h1",{className:"px-4 py-4 text-xl text-gray-400",children:"No Notifications"})})})})]})})};function K(r){return N({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"},child:[]}]})(r)}const Q="/assets/logo-BPWWmm7p.png",se=()=>{const r=n.useContext(S),{user:e}=w(d=>d.userAuth),[o,u]=n.useState(),[i,p]=n.useState(),s=E(),x=k(),[l,c]=n.useState(!1),[v,h]=n.useState(null);n.useEffect(()=>{var d;(d=r==null?void 0:r.current)==null||d.on("getNotification",a=>{h({senderId:a==null?void 0:a.senderId,content:a==null?void 0:a.content,type:a==null?void 0:a.type,createdAt:Date.now()})})},[r]);const C=()=>{(e==null?void 0:e.role)==="mentee"&&s("/managment"),(e==null?void 0:e.role)==="mentor"&&s("/mentor/profile")},I=async()=>{(await x.delete("/logout",{withCredentials:!0})).data.status==="success"&&(F.remove("accessToken"),s("/signin"))};n.useEffect(()=>{(async()=>{try{const a=await x.get(`/getimage/${e==null?void 0:e.role}`,{withCredentials:!0});a.data&&u(a.data.profileImageId)}catch(a){console.error("Error fetching profile image ID:",a)}})()},[x,e==null?void 0:e.role]),n.useEffect(()=>{o&&(async()=>{try{const P=L(_,o),A=await O(P);p(A)}catch(a){console.error(a)}})()},[o,x]);const b=()=>{(e==null?void 0:e.role)==="mentor"&&s("/mentor/my-mentees")},z=()=>{(e==null?void 0:e.role)==="mentor"&&s("/mentor/chat"),(e==null?void 0:e.role)==="mentee"&&s("/my-mentors")},M=()=>{(e==null?void 0:e.role)==="mentor"&&s("/mentor/plans")},D=()=>{(e==null?void 0:e.role)==="mentor"&&s("/mentor/managment/password")},H=()=>{c(d=>!d)};return t(f,{children:m("div",{className:"grid grid-cols-12 w-full items-center sticky shadow-lg z-10",children:[t("div",{className:"col-span-4 bg-gray-800 h-16 flex items-center",children:t("img",{src:Q,className:"w-16 md:py-6 md:ml-10 cursor-pointer px-2 md:px-0",alt:"logo",onClick:()=>{(e==null?void 0:e.role)==="mentee"?s("/"):(e==null?void 0:e.role)==="mentor"?s("/mentor/home"):s("/admin/dashboard")}})}),t("div",{className:"col-span-8 bg-gray-800 h-16",children:t("div",{className:"flex justify-end items-center text-gray-400",children:m("div",{className:"flex",children:[m("div",{className:"flex gap-4 md:gap-7 items-center",children:[t("div",{onClick:()=>{(e==null?void 0:e.role)==="mentor"&&s("/mentor/history"),(e==null?void 0:e.role)==="mentee"&&s("/history")},className:l?"hidden":"block",children:t(V,{className:"text-2xl hover:text-blue-600 text-gray-400"})}),(e==null?void 0:e.role)==="mentor"?t("div",{onClick:b,className:l?"hidden":"block",children:t(K,{className:"text-3xl text-gray-400 hover:text-blue-600 cursor-pointer"})}):"",t("div",{onClick:z,className:l?"hidden":"block",children:(e==null?void 0:e.role)==="mentor"?t(G,{className:"text-3xl hover:text-blue-600 cursor-pointer text-gray-400"}):t(f,{children:t(W,{className:"text-3xl hover:text-blue-600 text-gray-400"})})}),t("div",{className:l?"hidden":"block",children:t("span",{className:"cursor-pointer",children:t(R,{className:"text-3xl hover:text-blue-600 text-gray-400",onClick:H})})})]}),t(y,{fluid:!0,rounded:!0,className:l?"hidden":"block",children:m("div",{className:"flex",children:[m(g,{arrowIcon:!1,inline:!0,label:t(T,{alt:"User_settings",img:i||j,rounded:!0}),children:[m(g.Header,{children:[t("span",{className:"block text-sm",children:"Signed in as"}),t("span",{className:"block truncate text-sm font-medium",children:e==null?void 0:e.email})]}),t(g.Item,{onClick:C,children:"My Profile"}),(e==null?void 0:e.role)==="mentor"?t(g.Item,{onClick:M,children:"My Plans"}):"",(e==null?void 0:e.role)==="mentor"?t(g.Item,{onClick:D,children:"Password"}):"",t(g.Divider,{}),t(g.Item,{onClick:I,children:"Log out"})]}),t(y,{})]})}),l?t(J,{setOpen:c,notData:v||null}):""]})})})]})})};export{se as N};
